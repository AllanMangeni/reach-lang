<div class="note">
  <p>This frontend library relies on the <a href="/xxx/rpc/#ref-backends-rpc">Reach RPC Server</a>.</p>
</div>
<p>
  A <a href="https://www.javascript.com">JavaScript</a> client library for the
  <a href="/xxx/rpc/#ref-backends-rpc">Reach RPC protocol</a> may be installed by running:
</p>
<pre class="snippet unnumbered"><ol class="snippet"><li value="1">$ npm install --save @reach-sh/rpc-client</li></ol></pre>
<p>
  Once installed, add the following import line to your JavaScript file which will
  connect to the <a href="/xxx/rpc/#ref-backends-rpc">RPC server</a>:
</p>
<pre class="snippet unnumbered"><ol class="snippet"><li value="1"><span style="color: #CF222E">import</span><span style="color: #24292F"> { mkRPC } </span><span style="color: #CF222E">from</span><span style="color: #24292F"> </span><span style="color: #0A3069">'@reach-sh/rpc-client'</span><span style="color: #24292F">;</span></li></ol></pre>
<p>The library provides the following bindings:</p>
<hr>
<p><span id="js_mkRPC"></span></p>
<pre class="snippet unnumbered"><ol class="snippet"><li value="1"><span style="color: #CF222E">const</span><span style="color: #24292F"> { </span><span style="color: #0550AE">rpc</span><span style="color: #24292F">, </span><span style="color: #0550AE">rpcCallbacks</span><span style="color: #24292F"> } </span><span style="color: #CF222E">=</span><span style="color: #24292F"> </span><span style="color: #CF222E">await</span><span style="color: #24292F"> </span><span style="color: #8250DF">mkRPC</span><span style="color: #24292F">(opts);</span></li></ol></pre>
<p><code>mkRPC</code> accepts the <a href="/xxx/rpc/#ref-backends-rpc-opts">Reach RPC Client Standard Options</a> as an object and returns a Promise of an object with two fields, <code>rpc</code> and <code>rpcCallbacks</code>.</p>
<p>
  <span id="js_rpc"></span><code>rpc</code> is a function that invokes a synchronous value RPC method.
  It takes a string, naming the RPC method, and some JSON values to provide as arguments.
  It returns a Promise of a single JSON value as the result.
</p>
<p>For example,</p>
<pre class="snippet unnumbered"><ol class="snippet"><li value="1"><span style="color: #CF222E">await</span><span style="color: #24292F"> </span><span style="color: #8250DF">rpc</span><span style="color: #24292F">(</span><span style="color: #0A3069">`/stdlib/formatCurrency`</span><span style="color: #24292F">, i, </span><span style="color: #0550AE">4</span><span style="color: #24292F">);</span></li></ol></pre>
<p>calls <code>formatCurrency</code> with some value <code>i</code> and <code>4</code>.</p>
<p>
  <span id="js_rpcCallbacks"></span><code>rpcCallbacks</code> is a function that invokes an interactive RPC method, such as for a backend.
  It takes a string, naming the RPC method, a JSON value as an argument, and dictionary from strings to JSON values or <code>async</code> functions.
  The functions will be provided as interactive RPC callbacks to the RPC method and should expect JSON values as arguments and return a Promise of a JSON value as a result.
  It returns a Promise that does not contain a value.
</p>
<p>For example,</p>
<pre class="snippet numbered"><ol class="snippet"><li value="1"><span style="color: #CF222E">const</span><span style="color: #24292F"> </span><span style="color: #8250DF">showX</span><span style="color: #24292F"> </span><span style="color: #CF222E">=</span><span style="color: #24292F"> </span><span style="color: #CF222E">async</span><span style="color: #24292F"> (</span><span style="color: #953800">xo</span><span style="color: #24292F">) </span><span style="color: #CF222E">=&gt;</span><span style="color: #24292F"> {</span></li><li value="2"><span style="color: #24292F">  </span><span style="color: #CF222E">const</span><span style="color: #24292F"> </span><span style="color: #0550AE">x</span><span style="color: #24292F"> </span><span style="color: #CF222E">=</span><span style="color: #24292F"> </span><span style="color: #CF222E">await</span><span style="color: #24292F"> </span><span style="color: #8250DF">rpc</span><span style="color: #24292F">(</span><span style="color: #0A3069">`/stdlib/bigNumberToNumber`</span><span style="color: #24292F">, xo);</span></li><li value="3"><span style="color: #24292F">  console.</span><span style="color: #8250DF">log</span><span style="color: #24292F">(</span><span style="color: #0A3069">`Alice saw that X is ${</span><span style="color: #24292F">x</span><span style="color: #0A3069">}`</span><span style="color: #24292F">);</span></li><li value="4"><span style="color: #24292F">};</span></li><li value="5"><span style="color: #CF222E">const</span><span style="color: #24292F"> </span><span style="color: #0550AE">ms</span><span style="color: #24292F"> </span><span style="color: #CF222E">=</span><span style="color: #24292F"> {</span></li><li value="6"><span style="color: #24292F">  </span><span style="color: #0A3069">'price'</span><span style="color: #24292F">: </span><span style="color: #0550AE">10</span><span style="color: #24292F">,</span></li><li value="7"><span style="color: #24292F">  </span><span style="color: #0A3069">'showX'</span><span style="color: #24292F">: showX,</span></li><li value="8"><span style="color: #24292F">};</span></li><li value="9"><span style="color: #CF222E">await</span><span style="color: #24292F"> </span><span style="color: #8250DF">rpcCallbacks</span><span style="color: #24292F">(</span><span style="color: #0A3069">`/backend/Alice`</span><span style="color: #24292F">, ctc, ms)</span></li></ol></pre>
<p>calls a backend named <code>Alice</code> with the contract <code>ctc</code> and a value named <code>price</code> and a method named <code>showX</code> that prints out a result from the Reach backend.</p>