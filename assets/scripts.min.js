const axiosGetData=async e=>{return(await axios.get(e)).data};import algoliasearch from"https://cdn.jsdelivr.net/npm/algoliasearch@4/dist/algoliasearch-lite.esm.browser.js";const searchClient=algoliasearch("M53HHHS0ZW","0cfd8f1c1a0e3cb7b2abd77b831614dc"),searchIndex=searchClient.initIndex("rdp_en"),currentPage={folder:null,bookPath:null,hasOtp:!1,src:null},github="https://github.com/reach-sh/reach-lang/tree/master/docs/dev/src",getWinWidthStr=()=>{var e=window.innerWidth;return 1200<=e?"xl":992<=e?"lg":768<=e?"md":576<=e?"sm":"xs"},maxColWidth="280px";let winWidth=getWinWidthStr();const establishDisplay=()=>{if(currentPage.bookPath){const e=document.getElementById("book-col"),t=document.querySelector("div.show-book-col");"xl"==winWidth||"lg"==winWidth||"md"==winWidth?(e.style.maxWidth=maxColWidth,e.style.display="block",t.style.display="none"):"sm"!=winWidth&&"xs"!=winWidth||(e.style.maxWidth="none",e.style.display="none",t.style.display="block")}if(currentPage.hasOtp){const o=document.getElementById("otp-col"),n=document.querySelector("button.show-otp-col");"xl"==winWidth||"lg"==winWidth||"md"==winWidth?(o.style.maxWidth=maxColWidth,o.style.display="block",n.style.display="none"):"sm"!=winWidth&&"xs"!=winWidth||(o.style.maxWidth="none",o.style.display="none",n.style.display="block")}};window.addEventListener("resize",()=>{var e=getWinWidthStr();winWidth!=e&&(winWidth=e,establishDisplay())});const scrollHandler=e=>{if(0==document.querySelectorAll("#otp-col li.dynamic").length)e.target.onscroll=null;else{const o=document.querySelectorAll("#page-col div.hh-viewer h1, #page-col div.hh-viewer h2");if(o.length){let t="on-this-page";for(let e=o.length-1;0<=e;e--)if(o[e].getBoundingClientRect().y<=80){t=o[e].id;break}gotoTarget(!0,t,!1)}}},scrollPage=e=>{if("on-this-page"==e)document.getElementById("page-col").scrollTo(0,0);else{const t=document.getElementById(e);t&&t.scrollIntoView()}},updateHistory=e=>{var t=""+window.location.origin+currentPage.folder;window.history.pushState(null,"","on-this-page"==e?t:t+"#"+e)},gotoTarget=async(e,t,o=!0)=>{o&&scrollPage(t),e&&updateHistory(t),setOtpItemToActive(t)},setOtpItemToActive=e=>{const t="on-this-page"===e?document.querySelector('#otp-col ul li a[href="#on-this-page"]'):document.querySelector('#otp-col ul li a[href="#'+e+'"]');if(t&&t.classList&&!1===t.classList.contains("active")){const o=document.querySelector("#otp-col a.active");o&&o.classList.remove("active"),t.classList.add("active")}},getWebpage=async(e,t,o)=>{e=e.replace(/index\.html$/,"");var n=""+window.location.origin+e;if(!e||!n)throw Error("getWebpage on undefined");var l=axiosGetData(n+"page.html"),a=axiosGetData(n+"otp.html"),n=await axiosGetData(n+"config.json");if(n.bookPath&&n.bookPath!==currentPage.bookPath){const r=document.getElementById("about-this-book");r.href=`/${n.bookPath}/`,r.innerHTML=n.bookTitle;var c=document.createRange().createContextualFragment((await axios.get(`${window.location.origin}/${n.bookPath}/book.html`)).data);document.querySelectorAll("#book-col div.dynamic").forEach(e=>e.remove()),document.querySelector("#book-col").append(c),document.querySelectorAll("#book-col i.chapter-icon").forEach(e=>{e.addEventListener("click",e=>{const t=e.target,o=t.closest("div.chapter").querySelector("div.pages");t.classList.contains("fa-angle-right")?(t.classList.remove("fa-angle-right"),t.classList.add("fa-angle-down"),o.style.display="block"):(t.classList.remove("fa-angle-down"),t.classList.add("fa-angle-right"),o.style.display="none")})})}currentPage.bookPath=n.bookPath;c=n.title;const i=document.querySelector("div.hh-viewer-wrapper span.title");i.id=n.titleId,i.textContent=c,document.title="Reach > "+c,document.getElementById("edit-btn").href=""+github+e+"index.md",document.querySelector("div.hh-viewer-wrapper span.author").innerHTML=n.author?"By "+n.author:"",document.querySelector("div.hh-viewer-wrapper span.published-date").innerHTML=n.publishedDate?"Published on "+new Date(n.publishedDate).toLocaleDateString():"";l=await l,l=document.createRange().createContextualFragment(l);document.querySelector("div.hh-viewer-wrapper div.hh-viewer").textContent="",document.querySelector("div.hh-viewer-wrapper div.hh-viewer").append(l);const s=document.getElementById("search-input");if(s&&(s.focus(),s.addEventListener("keyup",function(e){searchIndex.search(s.value).then(({hits:e})=>{if(e.length){const c=document.getElementById("search-results-list");c.innerHTML="",e.forEach((e,t)=>{const o=document.createElement("a");o.href=e.url;const n=document.createElement("span");n.innerHTML=e._highlightResult.title.value,o.append(n);const l=document.createElement("span");l.innerHTML=" - "+e._highlightResult.summary.value;const a=document.createElement("li");a.append(o),a.append(l),c.append(a)})}})})),n.hasOtp){document.querySelectorAll("#otp-col ul ul.dynamic, #otp-col ul li.dynamic").forEach(e=>{e.remove()});const h=document.querySelector("#otp-col ul");a=await a;const u=document.createRange().createContextualFragment(a),m=u.querySelector("ul");m&&m.querySelectorAll(":scope > li").forEach((e,t)=>{0==t?(t=e.querySelector("ul"))&&h.querySelector("li").append(t):h.append(e)})}currentPage.hasOtp=n.hasOtp,document.querySelectorAll("a").forEach(e=>{e.classList.remove("active")}),n.menuItem&&document.getElementById(n.menuItem).classList.add("active");const d=document.querySelector(`a[href="${e}"]`);if(d){d.classList.add("active");const p=d.closest("div.chapter"),y=p.querySelector("div.pages");if(y&&y.hasChildNodes()){const g=p.querySelector("i.chapter-icon");g.classList.remove("fa-angle-right"),g.classList.add("fa-angle-down"),y.style.display="block"}}establishDisplay(),n.bookPath?(document.getElementById("book-col").classList.remove("banish"),document.querySelector("div.show-book-col").classList.remove("banish")):(document.getElementById("book-col").classList.add("banish"),document.querySelector("div.show-book-col").classList.add("banish")),document.querySelector("div.hh-page-header").style.display=n.hasPageHeader?"block":"none",document.getElementById("page-col").style.display="block",n.hasOtp?(document.getElementById("otp-col").classList.remove("banish"),document.querySelector("button.show-otp-col").classList.remove("banish")):(document.getElementById("otp-col").classList.add("banish"),document.querySelector("button.show-otp-col").classList.add("banish")),currentPage.folder=e,setClickFollowLink(),await gotoTarget(o,t?t.substring(1):"on-this-page")},clickFollowLink=async e=>{if(!e.shiftKey&&!e.ctrlKey){var t=e.target.href;const o=document.createElement("a");o.href=t,o.hostname===window.location.hostname&&(e.preventDefault(),currentPage.folder==o.pathname&&o.hash?(e="#on-this-page"===o.hash?"on-this-page":o.hash.substring(1),await gotoTarget(!0,e)):await getWebpage(o.pathname,o.hash,!0))}},setClickFollowLink=()=>{document.querySelectorAll("a").forEach(e=>{e.addEventListener("click",clickFollowLink)})};window.onpopstate=function(e){const t=document.createElement("a");t.href=document.location.href,getWebpage(t.pathname,t.hash,!1)},document.querySelector("button.hide-book-icon").addEventListener("click",e=>{"sm"!=winWidth&&"xs"!=winWidth||(document.getElementById("page-col").style.display="block"),document.getElementById("book-col").style.display="none",document.querySelector("div.show-book-col").style.display="block"}),document.querySelector("button.show-book-col").addEventListener("click",e=>{"sm"!=winWidth&&"xs"!=winWidth||(document.getElementById("page-col").style.display="none"),document.getElementById("book-col").style.display="block",document.querySelector("div.show-book-col").style.display="none"}),document.querySelector("button.hide-otp-icon").addEventListener("click",e=>{"sm"!=winWidth&&"xs"!=winWidth||(document.getElementById("page-col").style.display="block"),document.getElementById("otp-col").style.display="none",document.querySelector("button.show-otp-col").style.display="block"}),document.querySelector("button.show-otp-col").addEventListener("click",e=>{"sm"!=winWidth&&"xs"!=winWidth||(document.getElementById("page-col").style.display="none"),document.getElementById("otp-col").style.display="block",document.querySelector("button.show-otp-col").style.display="none"}),document.getElementById("page-col").addEventListener("scroll",scrollHandler),getWebpage(window.location.pathname,window.location.hash,!0);