const axiosGetData=async e=>{return(await axios.get(e)).data},doc=window.document,hh=e=>""===e?"/":`/${e}/`,searchClient=algoliasearch("M53HHHS0ZW","0cfd8f1c1a0e3cb7b2abd77b831614dc"),searchIndex=searchClient.initIndex("docs"),currentPage={folder:null,bookPath:void 0,hasOtp:!1},getWinWidthStr=()=>{var e=window.innerWidth;return 1200<=e?"xl":992<=e?"lg":768<=e?"md":576<=e?"sm":"xs"},maxColWidth="280px";let winWidth=getWinWidthStr();const establishDisplay=()=>{const e=doc.getElementById("book-col");if(void 0!==currentPage.bookPath){const t=doc.querySelector("div.show-book-col");"xl"==winWidth||"lg"==winWidth||"md"==winWidth?(e.style.maxWidth=maxColWidth,e.style.display="block",t.style.display="none"):"sm"!=winWidth&&"xs"!=winWidth||(e.style.maxWidth="none",e.style.display="none",t.style.display="block")}if(currentPage.hasOtp){const o=doc.getElementById("otp-col"),a=doc.querySelector("button.show-otp-col");"xl"==winWidth||"lg"==winWidth||"md"==winWidth?(o.style.maxWidth=maxColWidth,o.style.display="block",a.style.display="none"):"sm"!=winWidth&&"xs"!=winWidth||(o.style.maxWidth="none",o.style.display="none",a.style.display="block")}};window.addEventListener("resize",()=>{var e=getWinWidthStr();winWidth!=e&&(winWidth=e,establishDisplay())});const scrollHandler=e=>{if(0==doc.querySelectorAll("#otp-col li.dynamic").length)e.target.onscroll=null;else{const c=doc.createElement("a");var o=doc.querySelectorAll("#otp-col a");let t="on-this-page";for(let e=o.length-1;0<=e;e--){c.href=o[e].href;const l=c.hash;var a=l&&l.substring(1);const s=a&&doc.getElementById(a);a=s&&s.getBoundingClientRect();if(a&&a.y<=80){t=s.id;break}}gotoTarget(!1,t,!1)}},scrollPage=e=>{if("on-this-page"==e)doc.getElementById("page-col").scrollTo(0,0);else{const t=doc.getElementById(e);t&&t.scrollIntoView()}},updateHistory=e=>{var t=`${window.location.origin}${currentPage.folder}`;window.history.pushState(null,"","on-this-page"==e?t:`${t}#${e}`)},gotoTarget=async(e,t,o=!0)=>{o&&scrollPage(t),e&&updateHistory(t),setOtpItemToActive(t)},setOtpItemToActive=e=>{const t=doc.querySelector("#otp-col a.active");t&&t.classList.remove("active");const o="on-this-page"===e?doc.querySelector('#otp-col a[href="#on-this-page"]'):doc.querySelector('#otp-col a[href="#'+e+'"]');o&&o.classList&&!1===o.classList.contains("active")&&o.classList.add("active")},getWebpage=async(e,t,o)=>{e=e.replace(/index\.html$/,"");var a=`${window.location.origin}${e}`;if(!e||!a)throw Error("getWebpage on undefined");var[c,l,a]=await axiosGetData(`${a}index.md`);void 0!==c.bookPath&&c.bookPath!==currentPage.bookPath&&(s=doc.createRange().createContextualFragment(await axiosGetData(`${window.location.origin}${hh(c.bookPath)}book.html`)),doc.querySelectorAll("#book-col div.dynamic").forEach(e=>e.remove()),doc.querySelector("#book-col").append(s),doc.querySelectorAll("#book-col i.chapter-icon").forEach(e=>{e.addEventListener("click",e=>{const t=e.target,o=t.closest("div.chapter").querySelector("div.pages");t.classList.contains("fa-angle-right")?(t.classList.remove("fa-angle-right"),t.classList.add("fa-angle-down"),o.style.display="block"):(t.classList.remove("fa-angle-down"),t.classList.add("fa-angle-right"),o.style.display="none")})})),currentPage.bookPath=c.bookPath;var s=c.title;const i=doc.querySelector("div#hh-viewer-wrapper span.title");i.id=c.titleId,i.textContent=s,doc.title=`Reach > ${s}`;doc.getElementById("edit-btn").href=`https://github.com/reach-sh/reach-lang/tree/master/docs/src${e}index.md`;l=doc.createRange().createContextualFragment(l);doc.querySelector("div#hh-viewer-wrapper div#hh-viewer").textContent="",doc.querySelector("div#hh-viewer-wrapper div#hh-viewer").append(l);const n=doc.getElementById("search-input");if(n){currentPage.bookPath=void 0,n.focus();const d=doc.getElementById("search-results-list");n.addEventListener("keyup",async e=>{const t=(await searchIndex.search(n.value))["hits"];t.length&&(d.innerHTML="",t.forEach(e=>{var t=["sdRef","sdTerm","sdHeader","sdPara"][e.t];const a=doc.createElement("li");a.classList.add(t);var o=(e,t)=>{const o=doc.createElement("span");o.classList.add(e),o.innerText=t,a.appendChild(o)};const c=doc.createElement("a");c.classList.add("pt"),c.href=e.objectID,c.innerText=e.pt,a.appendChild(c),"sdRef"===t?(o("symbol",e.c),o("scope",e.s)):"sdTerm"===t?o("term",e.c):"sdHeader"===t?o("h",e.c):"sdPara"===t&&o("p",e.c),d.append(a)}),setClickFollowLink())})}if(c.hasOtp){doc.querySelectorAll("#otp-col ul ul.dynamic, #otp-col ul li.dynamic").forEach(e=>{e.remove()});const h=doc.querySelector("#otp-col ul"),p=doc.createRange().createContextualFragment(a),y=p.querySelector("ul");y&&y.querySelectorAll(":scope > li").forEach((e,t)=>{0==t?(t=e.querySelector("ul"))&&h.querySelector("li").append(t):h.append(e)})}currentPage.hasOtp=c.hasOtp,doc.querySelectorAll("a").forEach(e=>{e.classList.remove("active")}),doc.querySelectorAll(`a[href="${e}"]`).forEach(e=>{e.classList.add("active")});const r=doc.querySelector(`#book-col a[href="${e}"]`);if(r){const g=r.closest("div.chapter"),u=g&&g.querySelector("div.pages");if(u&&u.hasChildNodes()){const m=g.querySelector("i.chapter-icon");m.classList.remove("fa-angle-right"),m.classList.add("fa-angle-down"),u.style.display="block"}}establishDisplay(),null!=currentPage.bookPath?(doc.getElementById("book-col").classList.remove("banish"),doc.querySelector("div.show-book-col").classList.remove("banish")):(doc.getElementById("book-col").classList.add("banish"),doc.querySelector("div.show-book-col").classList.add("banish")),doc.querySelector("div#hh-page-header").style.display=c.hasPageHeader?"block":"none",doc.getElementById("page-col").style.display="block",c.hasOtp?(doc.getElementById("otp-col").classList.remove("banish"),doc.querySelector("button.show-otp-col").classList.remove("banish")):(doc.getElementById("otp-col").classList.add("banish"),doc.querySelector("button.show-otp-col").classList.add("banish")),currentPage.folder=e,setClickFollowLink(),await gotoTarget(o,t?t.substring(1):"on-this-page")},clickFollowLink=async e=>{if(!(e.shiftKey||e.ctrlKey||e.metaKey)){const o=e.target.closest("a");if(o.classList&&o.classList.contains("copyBtn"))return e.preventDefault(),void await navigator.clipboard.writeText(o.getAttribute("data-clipboard-text"));var t=o.href;const a=doc.createElement("a");if(a.href=t,a.hostname===window.location.hostname)if(e.preventDefault(),currentPage.folder==a.pathname&&a.hash){const o="#on-this-page"===a.hash?"on-this-page":a.hash.substring(1);await gotoTarget(!0,o)}else await getWebpage(a.pathname,a.hash,!0)}},setClickFollowLink=()=>{doc.querySelectorAll("a").forEach(e=>{e.addEventListener("click",clickFollowLink)})};window.onpopstate=function(e){const t=doc.createElement("a");t.href=doc.location.href,getWebpage(t.pathname,t.hash,!1)};const makeShowHide=(c,l,s)=>{var e=e=>{var t=e=>e?"block":"none";const o=t(e),a=t(!e);e=e?c:l;doc.querySelector(e).addEventListener("click",e=>{"sm"!=winWidth&&"xs"!=winWidth||(doc.getElementById("page-col").style.display=o),doc.getElementById(s).style.display=a,doc.querySelector(l).style.display=o})};e(!0),e(!1)};makeShowHide("button.hide-book-icon","div.show-book-col","book-col"),makeShowHide("button.hide-otp-icon","button.show-otp-col","otp-col"),doc.getElementById("page-col").addEventListener("scroll",scrollHandler),getWebpage(window.location.pathname,window.location.hash,!0);