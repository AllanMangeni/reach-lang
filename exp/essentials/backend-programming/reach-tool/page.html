<p>The <a href="https://github.com/reach-sh/reach-lang/blob/master/reach">reach</a> command-line tool enables you to compile Reach DApps and manage your Reach development environment. To install the tool, see <a href="/en/essentials/getting-started/install-and-run/">Install and Run</a>.</p>
<h1 id="environment-variables">Environment Variables<a aria-hidden="true" tabindex="-1" href="#environment-variables"><span class="icon icon-link"></span></a></h1>
<p>In addition to passing command-line arguments, you can influence the behavior of the <a href="https://github.com/reach-sh/reach-lang/blob/master/reach">reach</a> command-line tool by setting environment variables.</p>
<h2 id="reach_connector_mode">REACH_CONNECTOR_MODE<a aria-hidden="true" tabindex="-1" href="#reach_connector_mode"><span class="icon icon-link"></span></a></h2>
<p>To target a specific <a href="/en/essentials/network-connectors/">consensus network</a>, set the <code>REACH_CONNECTOR_MODE</code> environment variable to the desired <a href="https://github.com/reach-sh/reach-lang/blob/master/js/stdlib/ts/ConnectorMode.ts">connector mode</a>:</p>
<table>
  <thead>
    <tr>
      <th align="none">Network</th>
      <th align="none">Example</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td align="none">Algorand</td>
      <td align="none"><code>export REACH_CONNECTOR_MODE=ALGO-devnet</code><br><code>export REACH_CONNECTOR_MODE=ALGO-live</code><br><code>export REACH_CONNECTOR_MODE=ALGO-browser</code></td>
    </tr>
    <tr>
      <td align="none">Conflux</td>
      <td align="none"><code>export REACH_CONNECTOR_MODE=CFX-devnet</code><br><code>export REACH_CONNECTOR_MODE=CFX-live</code><br><code>export REACH_CONNECTOR_MODE=CFX-browser</code></td>
    </tr>
    <tr>
      <td align="none">Ethereum</td>
      <td align="none"><code>export REACH_CONNECTOR_MODE=ETH-devnet</code><br><code>export REACH_CONNECTOR_MODE=ETH-live</code><br><code>export REACH_CONNECTOR_MODE=ETH-browser</code></td>
    </tr>
  </tbody>
</table>
<h2 id="reach_debug">REACH_DEBUG<a aria-hidden="true" tabindex="-1" href="#reach_debug"><span class="icon icon-link"></span></a></h2>
<p>To cause the Reach compiler to display additional debug information, set REACH_DEBUG to a non-empty value:</p>
<pre class="snippet unnumbered"><ol class="snippet"><li value="1">export REACH_DEBUG=1</li></ol></pre>
<h2 id="reach_rpc">REACH_RPC<a aria-hidden="true" tabindex="-1" href="#reach_rpc"><span class="icon icon-link"></span></a></h2>
<p>The <a href="/en/essentials/frontend-programming/rpc-frontends/">Reach RPC Server</a> supports the environment variables listed below. See <a href="/en/essentials/backend-programming/reach-tool/#reach-rpc-server">reach rpc-server</a> for details:</p>
<pre class="snippet unnumbered"><ol class="snippet"><li value="1">REACH_RPC_KEY</li><li value="2">REACH_RPC_PORT</li><li value="3">REACH_RPC_SERVER</li><li value="4">REACH_RPC_TLS_CRT</li><li value="5">REACH_RPC_TLS_KEY</li><li value="6">REACH_RPC_TLS_PASSPHRASE</li><li value="7">REACH_RPC_TLS_REJECT_UNVERIFIED</li></ol></pre>
<h2 id="reach_version">REACH_VERSION<a aria-hidden="true" tabindex="-1" href="#reach_version"><span class="icon icon-link"></span></a></h2>
<p>To target a specific Reach compiler version, find the version on <a href="https://hub.docker.com/r/reachsh/reach/tags">DockerHub</a>, and set the <code>REACH_VERSION</code> environment variable to the desired version, hash tag, date, or identifier:</p>
<table>
  <thead>
    <tr>
      <th align="none">Technique</th>
      <th align="none">Example</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td align="none">Version</td>
      <td align="none"><code>export REACH_VERSION 0.1.6</code><br><code>export REACH_VERSION v0.1.6</code></td>
    </tr>
    <tr>
      <td align="none">Hash Tag</td>
      <td align="none"><code>export REACH_VERSION 639fa565</code></td>
    </tr>
    <tr>
      <td align="none">Date</td>
      <td align="none"><code>export REACH_VERSION 2021-11-04</code></td>
    </tr>
    <tr>
      <td align="none">Identifier</td>
      <td align="none"><code>export REACH_VERSION latest</code><br><code>export REACH_VERSION stable</code></td>
    </tr>
  </tbody>
</table>
<h1 id="commands">Commands<a aria-hidden="true" tabindex="-1" href="#commands"><span class="icon icon-link"></span></a></h1>
<p>Run <code>reach help</code> to view available commands.</p>
<h2 id="reach-clean">reach clean<a aria-hidden="true" tabindex="-1" href="#reach-clean"><span class="icon icon-link"></span></a></h2>
<p>By default, this command deletes <code>build/index.main.mjs</code>:</p>
<pre class="snippet unnumbered"><ol class="snippet"><li value="1">$ reach clean</li></ol></pre>
<p>To delete <code>build/myindex.mymain.mjs</code>, run the following:</p>
<pre class="snippet unnumbered"><ol class="snippet"><li value="1">$ reach clean myindex mymain</li></ol></pre>
<p>To delete <code>~/reach/hello-world/build/index.mymain.mjs</code>, run the following:</p>
<pre class="snippet unnumbered"><ol class="snippet"><li value="1">$ reach clean ~/reach/hello-world mymain</li></ol></pre>
<h2 id="reach-compile">reach compile<a aria-hidden="true" tabindex="-1" href="#reach-compile"><span class="icon icon-link"></span></a></h2>
<p>By default, this command compiles <code>index.rsh</code> into <code>build/index.main.mjs</code> and verifies it:</p>
<pre class="snippet unnumbered"><ol class="snippet"><li value="1">$ reach compile</li></ol></pre>
<p>To output debug information, set <code>REACH_DEBUG</code> to a non-zero value:</p>
<pre class="snippet unnumbered"><ol class="snippet"><li value="1">$ export REACH_DEBUG=1</li><li value="2">$ reach compile</li></ol></pre>
<p>To compile <code>myindex.rsh</code> into <code>build/myindex.main.mjs</code>, run the following:</p>
<pre class="snippet unnumbered"><ol class="snippet"><li value="1">$ reach compile myindex.rsh</li></ol></pre>
<p>To compile <code>myindex.rsh</code> into <code>mybuild/myindex.main.mjs</code>, run the following:</p>
<pre class="snippet unnumbered"><ol class="snippet"><li value="1">$ reach compile myindex.rsh --output mybuild</li></ol></pre>
<p>To retain intermediate build files in <code>/build</code>, use <code>--intermediate-files</code>:</p>
<pre class="snippet unnumbered"><ol class="snippet"><li value="1">$ reach compile --intermediate-files</li></ol></pre>
<p>To fetch remote package imports without compiling, use <code>--install-pkgs</code>:</p>
<pre class="snippet unnumbered"><ol class="snippet"><li value="1">$ reach compile --install-pkgs</li></ol></pre>
<h2 id="reach-config">reach config<a aria-hidden="true" tabindex="-1" href="#reach-config"><span class="icon icon-link"></span></a></h2>
<p>After soliciting information from you, this command creates a <code>~/.config/reach/env</code> script containing commands to export Reach environment variables:</p>
<pre class="snippet unnumbered"><ol class="snippet"><li value="1">$ reach config</li></ol></pre>
<p>Output from this command supplies you with customized directions to <a href="https://en.wikipedia.org/wiki/Dot_(command)">source</a> the <code>env</code> script.</p>
<h2 id="reach-devnet">reach devnet<a aria-hidden="true" tabindex="-1" href="#reach-devnet"><span class="icon icon-link"></span></a></h2>
<p>With <code>REACH_CONNECTOR_MODE</code> set, this command launches a private devnet on which you can run/test your Reach DApps:</p>
<pre class="snippet unnumbered"><ol class="snippet"><li value="1">$ reach devnet</li></ol></pre>
<p>To run the devnet in the background, use <code>--await-background</code>:</p>
<pre class="snippet unnumbered"><ol class="snippet"><li value="1">$ reach devnet --await-background</li></ol></pre>
<h2 id="reach-docker-reset">reach docker-reset<a aria-hidden="true" tabindex="-1" href="#reach-docker-reset"><span class="icon icon-link"></span></a></h2>
<p>This command stops and deletes all Docker containers including Reach Docker containers.</p>
<pre class="snippet unnumbered"><ol class="snippet"><li value="1">$ reach docker-reset</li></ol></pre>
<p>Use <a href="#reach-down">reach down</a> to stop and delete only Reach Docker containers.</p>
<h2 id="reach-down">reach down<a aria-hidden="true" tabindex="-1" href="#reach-down"><span class="icon icon-link"></span></a></h2>
<p>This command stops and deletes all Reach Docker containers.</p>
<pre class="snippet unnumbered"><ol class="snippet"><li value="1">$ reach down</li></ol></pre>
<p>Docker containers are instances of Docker images. So, after you run <code>reach update</code> to refresh you Reach Docker images, running <code>reach down</code> ensures that all Reach Docker containers based on old Reach Docker images are removed.</p>
<h2 id="reach-hashes">reach hashes<a aria-hidden="true" tabindex="-1" href="#reach-hashes"><span class="icon icon-link"></span></a></h2>
<p>This command displays git hash values associated with your current Reach Docker images:</p>
<pre class="snippet unnumbered"><ol class="snippet"><li value="1">$ reach hashes</li></ol></pre>
<h2 id="reach-init">reach init<a aria-hidden="true" tabindex="-1" href="#reach-init"><span class="icon icon-link"></span></a></h2>
<p>This command creates minimal <em>index.rsh</em> and <em>index.mjs</em> files in the current directory:</p>
<pre class="snippet unnumbered"><ol class="snippet"><li value="1">$ reach init [TEMPLATE]</li></ol></pre>
<p>The command aborts if <em>index.rsh</em> or <em>index.mjs</em> already exists.</p>
<h2 id="reach-react">reach react<a aria-hidden="true" tabindex="-1" href="#reach-react"><span class="icon icon-link"></span></a></h2>
<p>This command runs a simple React app consisting of <em>index.rsh</em> and <em>index.js</em>:</p>
<pre class="snippet unnumbered"><ol class="snippet"><li value="1">$ reach react</li></ol></pre>
<p>The command compiles <em>index.rsh</em>, runs the devnet specified by <code>REACH_CONNECTOR_MODE</code>, mounts the current directory into <code>/app/src/</code> in the <code>reachsh/react-runner</code> Docker image, and runs the app.</p>
<p>To output debug information, set <code>REACH_DEBUG</code> to a non-zero value:</p>
<pre class="snippet unnumbered"><ol class="snippet"><li value="1">$ export REACH_DEBUG=1</li><li value="2">$ reach react</li></ol></pre>
<h2 id="reach-rpc-run">reach rpc-run<a aria-hidden="true" tabindex="-1" href="#reach-rpc-run"><span class="icon icon-link"></span></a></h2>
<p>This command runs a Reach RPC server and an RPC frontend with a development configuration:</p>
<pre class="snippet unnumbered"><ol class="snippet"><li value="1">$ reach rpc-run</li></ol></pre>
<p>The command sets <code>REACH_RPC_KEY=opensesame</code> and <code>REACH_RPC_TLS_REJECT_UNVERIFIED=0</code>.</p>
<p>You can include on the <code>reach rpc-run</code> command line any arguments destined for your frontend executable like this:</p>
<pre class="snippet unnumbered"><ol class="snippet"><li value="1">$ reach rpc-run python3 -u ./index.py</li></ol></pre>
<h2 id="reach-rpc-server">reach rpc-server<a aria-hidden="true" tabindex="-1" href="#reach-rpc-server"><span class="icon icon-link"></span></a></h2>
<p>With <code>REACH_CONNECTOR_MODE</code> set, this command runs a Reach RPC server in support of <a href="/en/essentials/frontend-programming/rpc-frontends/">RPC frontends</a>:</p>
<pre class="snippet unnumbered"><ol class="snippet"><li value="1">$ reach rpc-server</li></ol></pre>
<p>The command respects the following environment variables:</p>
<table>
  <thead>
    <tr>
      <th align="none">Variable</th>
      <th align="none">Default</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td align="none"><code>REACH_RPC_KEY</code></td>
      <td align="none"><code>opensesame</code></td>
    </tr>
    <tr>
      <td align="none"><code>REACH_RPC_PORT</code></td>
      <td align="none"><code>3000</code></td>
    </tr>
    <tr>
      <td align="none"><code>REACH_RPC_TLS_KEY</code></td>
      <td align="none"><code>reach-server.key</code></td>
    </tr>
    <tr>
      <td align="none"><code>REACH_RPC_TLS_CRT</code></td>
      <td align="none"><code>reach-server.crt</code></td>
    </tr>
    <tr>
      <td align="none"><code>REACH_RPC_TLS_PASSPHRASE</code></td>
      <td align="none"><code>rpc-demo</code></td>
    </tr>
  </tbody>
</table>
<p>In a production context, <code>REACH_RPC_KEY</code> should be secret, generated via a suitable method like this:</p>
<pre class="snippet unnumbered"><ol class="snippet"><li value="1">$ head -c 24 /dev/urandom | base64</li></ol></pre>
<p><code>REACH_RPC_TLS_KEY</code> specifies the path to the TLS key file in the <code>./tls</code> directory.</p>
<p><code>REACH_RPC_TLS_CRT</code> specifies the path to the TLS crt file in the <code>./tls</code> directory.</p>
<h2 id="reach-run">reach run<a aria-hidden="true" tabindex="-1" href="#reach-run"><span class="icon icon-link"></span></a></h2>
<p>With <code>REACH_CONNECTOR_MODE</code> set, this command runs an app in the current directory consisting of <em>index.rsh</em> and <em>index.js</em>:</p>
<pre class="snippet unnumbered"><ol class="snippet"><li value="1">$ reach run</li></ol></pre>
<p>The command does the following:</p>
<ol>
  <li>Compiles <code>index.rsh</code> into <code>build/index.main.mjs</code>.</li>
  <li>Builds a Docker image named <code>reachsh/reach-app-APP:latest</code> that depends on the <a href="/en/essentials/frontend-programming/javascript-frontends/">Reach JS standard library</a>.</li>
  <li>Instantiates a Docker container based on the Docker image.</li>
  <li>Connects to the consensus network determined by <code>REACH_CONNECTOR_MODE</code>.</li>
</ol>
<p>To output debug information, set <code>REACH_DEBUG</code> to a non-zero value:</p>
<pre class="snippet unnumbered"><ol class="snippet"><li value="1">$ export REACH_DEBUG=1</li><li value="2">$ reach run</li></ol></pre>
<p>To run an app in the current directory consisting of <em>myindex.rsh</em> and <em>myindex.js</em>, use the following:</p>
<pre class="snippet unnumbered"><ol class="snippet"><li value="1">$ reach run myindex</li></ol></pre>
<p>To pass arguments to <code>index.mjs</code> (e.g. <code>seller</code>), add the arguments to the <code>reach run index</code> command line:</p>
<pre class="snippet unnumbered"><ol class="snippet"><li value="1">$ reach run index seller</li></ol></pre>
<p>To extend <code>reach run</code> functionality, see <a href="#reach-scaffold">reach scaffold</a>.</p>
<h2 id="reach-scaffold">reach scaffold<a aria-hidden="true" tabindex="-1" href="#reach-scaffold"><span class="icon icon-link"></span></a></h2>
<p>This command lays the groundwork for adding NPM packages to your Reach DApp by creating two files, <em>package.json</em> and <em>Dockerfile</em>:</p>
<pre class="snippet unnumbered"><ol class="snippet"><li value="1">$ reach scaffold</li></ol></pre>
<p>After running <code>reach scaffold</code>, open <em>package.json</em>, and add desired dependencies (e.g. <code>yargs</code>):</p>
<pre class="snippet unnumbered"><ol class="snippet"><li value="1">"dependencies": {</li><li value="2">  "yargs": "^17.2.1"</li><li value="3">},</li></ol></pre>
<p>If you have an NPM environment installed on your computer, you can add dependencies by running <code>npm install</code>:</p>
<pre class="snippet unnumbered"><ol class="snippet"><li value="1">$ npm i yargs</li></ol></pre>
<p>Then, open <code>Dockerfile</code>, and uncomment the following lines:</p>
<pre class="snippet unnumbered"><ol class="snippet"><li value="1">COPY package.json /app/package.json</li><li value="2">RUN npm install</li><li value="3">RUN npm link @reach-sh/stdlib</li></ol></pre>
<p>These lines direct <code>reach run</code> to copy <em>package.json</em> to the Docker container where your app will run, and install your packages.</p>
<h2 id="reach-update">reach update<a aria-hidden="true" tabindex="-1" href="#reach-update"><span class="icon icon-link"></span></a></h2>
<p>This command downloads Reach Docker images to your computer.</p>
<pre class="snippet unnumbered"><ol class="snippet"><li value="1">$ reach update</li></ol></pre>
<p>By default, the command downloads the latest images. Set <a href="#reach_version">REACH_VERSION</a> to specify a different version.</p>
<h2 id="reach-upgrade">reach upgrade<a aria-hidden="true" tabindex="-1" href="#reach-upgrade"><span class="icon icon-link"></span></a></h2>
<p>This command upgrades your copy of the <a href="https://github.com/reach-sh/reach-lang/blob/master/reach">Reach Tool</a>.</p>
<pre class="snippet unnumbered"><ol class="snippet"><li value="1">$ reach upgrade</li></ol></pre>
<h2 id="reach-version">reach version<a aria-hidden="true" tabindex="-1" href="#reach-version"><span class="icon icon-link"></span></a></h2>
<p>This command displays the version of the Reach tool, compiler, and other images installed on your computer:</p>
<pre class="snippet unnumbered"><ol class="snippet"><li value="1">$ reach version</li></ol></pre>