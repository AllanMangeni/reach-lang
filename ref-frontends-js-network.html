<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-149147406-2"></script><script>window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-149147406-2');</script><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js"></script><script src="tooltips.js"></script><script src="reach-pre.js"></script><link rel="stylesheet" href="tooltips.css"><link rel="stylesheet" href="reach.css"><link rel="stylesheet" href="minted.css"><link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png"><link rel="manifest" href="/favicon/site.webmanifest"><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>5.7.1.5&nbsp;Network Utilities</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Reach:<span class="mywbr"> &nbsp;</span> The Safest and Easiest DApp Programming Language</a></td></tr></table></div><div class="tocviewsublisttop" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="overview.html" class="tocviewlink" data-pltdoc="x">Overview</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="tut.html" class="tocviewlink" data-pltdoc="x">Tutorial</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="guide.html" class="tocviewlink" data-pltdoc="x">Guide</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="workshop.html" class="tocviewlink" data-pltdoc="x">Workshop</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="ref.html" class="tocviewselflink" data-pltdoc="x">Reference</a></td></tr><tr><td align="right"></td><td><a href="doc-index.html" class="tocviewlink" data-pltdoc="x">Index</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>5&nbsp;</td><td><a href="ref.html" class="tocviewlink" data-pltdoc="x">Reference</a></td></tr></table><div class="tocviewsublist" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">5.1&nbsp;</td><td><a href="ref-install.html" class="tocviewlink" data-pltdoc="x">Installation</a></td></tr><tr><td align="right">5.2&nbsp;</td><td><a href="ref-usage.html" class="tocviewlink" data-pltdoc="x">Usage</a></td></tr><tr><td align="right">5.3&nbsp;</td><td><a href="ref-model.html" class="tocviewlink" data-pltdoc="x">Language Model</a></td></tr><tr><td align="right">5.4&nbsp;</td><td><a href="ref-programs.html" class="tocviewlink" data-pltdoc="x">Programs</a></td></tr><tr><td align="right">5.5&nbsp;</td><td><a href="ref-networks.html" class="tocviewlink" data-pltdoc="x">Consensus Network Connectors</a></td></tr><tr><td align="right">5.6&nbsp;</td><td><a href="ref-backends.html" class="tocviewlink" data-pltdoc="x">Participant Backends</a></td></tr><tr><td align="right">5.7&nbsp;</td><td><a href="ref-frontends.html" class="tocviewselflink" data-pltdoc="x">Frontend Support</a></td></tr><tr><td align="right">5.8&nbsp;</td><td><a href="ref-error-codes.html" class="tocviewlink" data-pltdoc="x">Error Codes</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_2&quot;);">&#9658;</a></td><td>5.7&nbsp;</td><td><a href="ref-frontends.html" class="tocviewlink" data-pltdoc="x">Frontend Support</a></td></tr></table><div class="tocviewsublist" style="display: none;" id="tocview_2"><table cellspacing="0" cellpadding="0"><tr><td align="right">5.7.1&nbsp;</td><td><a href="ref-frontends-js.html" class="tocviewselflink" data-pltdoc="x">Java<span class="mywbr"> &nbsp;</span>Script</a></td></tr><tr><td align="right">5.7.2&nbsp;</td><td><a href="ref-frontends-rpc-cs.html" class="tocviewlink" data-pltdoc="x">C# (RPC)</a></td></tr><tr><td align="right">5.7.3&nbsp;</td><td><a href="ref-frontends-rpc-js.html" class="tocviewlink" data-pltdoc="x">Java<span class="mywbr"> &nbsp;</span>Script (RPC)</a></td></tr><tr><td align="right">5.7.4&nbsp;</td><td><a href="ref-frontends-rpc-go.html" class="tocviewlink" data-pltdoc="x">Go (RPC)</a></td></tr><tr><td align="right">5.7.5&nbsp;</td><td><a href="ref-frontends-rpc-py.html" class="tocviewlink" data-pltdoc="x">Python (RPC)</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_3&quot;);">&#9660;</a></td><td>5.7.1&nbsp;</td><td><a href="ref-frontends-js.html" class="tocviewlink" data-pltdoc="x">Java<span class="mywbr"> &nbsp;</span>Script</a></td></tr></table><div class="tocviewsublistbottom" style="display: block;" id="tocview_3"><table cellspacing="0" cellpadding="0"><tr><td align="right">5.7.1.1&nbsp;</td><td><a href="ref-frontends-js-types.html" class="tocviewlink" data-pltdoc="x">Types</a></td></tr><tr><td align="right">5.7.1.2&nbsp;</td><td><a href="ref-frontends-js-loader.html" class="tocviewlink" data-pltdoc="x"><span class="stt">loader.mjs</span></a></td></tr><tr><td align="right">5.7.1.3&nbsp;</td><td><a href="ref-frontends-js-acc.html" class="tocviewlink" data-pltdoc="x">Account Handles</a></td></tr><tr><td align="right">5.7.1.4&nbsp;</td><td><a href="ref-frontends-js-ctc.html" class="tocviewlink" data-pltdoc="x">Contract Handles</a></td></tr><tr><td align="right">5.7.1.5&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Network Utilities</a></td></tr><tr><td align="right">5.7.1.6&nbsp;</td><td><a href="ref-frontends-js-provider.html" class="tocviewlink" data-pltdoc="x">Provider Selection</a></td></tr><tr><td align="right">5.7.1.7&nbsp;</td><td><a href="ref-frontends-js-utils.html" class="tocviewlink" data-pltdoc="x">Utilities</a></td></tr><tr><td align="right">5.7.1.8&nbsp;</td><td><a href="ref-frontends-js-ask.html" class="tocviewlink" data-pltdoc="x"><span class="stt">ask.mjs</span></a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><a href="#%28javascript._%28%28get.Network.Time%29%29%29" class="tocsublink" data-pltdoc="x"><span class="stt">get<span class="mywbr"> &nbsp;</span>Network<span class="mywbr"> &nbsp;</span>Time</span></a></td></tr><tr><td><a href="#%28javascript._%28%28wait.Until.Time%29%29%29" class="tocsublink" data-pltdoc="x"><span class="stt">wait<span class="mywbr"> &nbsp;</span>Until<span class="mywbr"> &nbsp;</span>Time</span></a></td></tr><tr><td><a href="#%28env._.R.E.A.C.H_.I.S.O.L.A.T.E.D_.N.E.T.W.O.R.K%29" class="tocsublink" data-pltdoc="x"><span class="stt">REACH_<span class="mywbr"> &nbsp;</span>ISOLATED_<span class="mywbr"> &nbsp;</span>NETWORK</span></a></td></tr><tr><td><a href="#%28javascript._%28%28get.Network.Secs%29%29%29" class="tocsublink" data-pltdoc="x"><span class="stt">get<span class="mywbr"> &nbsp;</span>Network<span class="mywbr"> &nbsp;</span>Secs</span></a></td></tr><tr><td><a href="#%28javascript._%28%28wait.Until.Secs%29%29%29" class="tocsublink" data-pltdoc="x"><span class="stt">wait<span class="mywbr"> &nbsp;</span>Until<span class="mywbr"> &nbsp;</span>Secs</span></a></td></tr><tr><td><a href="#%28javascript._%28%28wait%29%29%29" class="tocsublink" data-pltdoc="x"><span class="stt">wait</span></a></td></tr><tr><td><a href="#%28javascript._%28%28connector%29%29%29" class="tocsublink" data-pltdoc="x"><span class="stt">connector</span></a></td></tr><tr><td><a href="#%28javascript._%28%28set.Query.Lower.Bound%29%29%29" class="tocsublink" data-pltdoc="x"><span class="stt">set<span class="mywbr"> &nbsp;</span>Query<span class="mywbr"> &nbsp;</span>Lower<span class="mywbr"> &nbsp;</span>Bound</span></a></td></tr><tr><td><a href="#%28javascript._%28%28set.Valid.Query.Window%29%29%29" class="tocsublink" data-pltdoc="x"><span class="stt">set<span class="mywbr"> &nbsp;</span>Valid<span class="mywbr"> &nbsp;</span>Query<span class="mywbr"> &nbsp;</span>Window</span></a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search docs..." title="Enter a search string to search the Reach documentation" onkeypress="return reach_DoSearch(event, this);"></form>&nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="ref-frontends-js-ctc.html" title="backward to &quot;5.7.1.4 Contract Handles&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="ref-frontends-js.html" title="up to &quot;5.7.1 JavaScript&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="ref-frontends-js-provider.html" title="forward to &quot;5.7.1.6 Provider Selection&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h5>5.7.1.5<tt>&nbsp;</tt><a name="(part._ref-frontends-js-network)"></a>Network Utilities</h5><p>These functions interact with the <a href="ref-model.html#%28tech._consensus._network%29" class="techoutside" data-pltdoc="x"><span class="techinside">consensus network</span></a> itself.</p><p><span style="font-weight: bold">&#8212;<wbr></wbr></span></p><p><div class="highlight"><pre><span></span><a name="(javascript._((get.Network.Time)))"></a><a name="(idx._(gentag._463))"></a><span class="nx">getNetworkTime</span><span class="p">()</span> <span class="p">=&gt;</span> <font class="badlink"><span class="nb">Promise</span></font><font class="badlink"><span class="o">&lt;</span></font><font class="badlink"><span class="nx">time</span></font><font class="badlink"><span class="o">&gt;</span></font>
</pre></div></p><p>Returns a Promise for the current consensus <a href="ref-model.html#%28tech._network._time%29" class="techoutside" data-pltdoc="x"><span class="techinside">network time</span></a>,
represented as a <span class="RktInBG"><span class="hspace"></span><span class="RktIn">BigNumber</span><span class="hspace"></span></span>.</p><p><span style="font-weight: bold">&#8212;<wbr></wbr></span></p><p><div class="highlight"><pre><span></span><a name="(javascript._((wait.Until.Time)))"></a><a name="(idx._(gentag._464))"></a><span class="nx">waitUntilTime</span><span class="p">(</span><font class="badlink"><span class="nx">time</span></font><span class="p">,</span> <font class="badlink"><span class="nx">onProgress</span></font><font class="badlink"><span class="o">?</span></font><span class="p">)</span> <span class="p">=&gt;</span> <font class="badlink"><span class="nb">Promise</span></font><font class="badlink"><span class="o">&lt;</span></font><font class="badlink"><span class="nx">time</span></font><font class="badlink"><span class="o">&gt;</span></font>
</pre></div></p><p>Returns a Promise that will only be resolved after the specified consensus <a href="ref-model.html#%28tech._network._time%29" class="techoutside" data-pltdoc="x"><span class="techinside">network time</span></a>.
In <a href="#%28tech._isolated._testing._mode%29" class="techoutside" data-pltdoc="x"><span class="techinside">isolated testing modes</span></a>, this will also force time to pass on the network, usually by sending trivial transactions.
An <a name="(tech._isolated._testing._mode)"></a><span style="font-style: italic">isolated testing mode</span> is a <a href="ref-usage.html#%28env._.R.E.A.C.H_.C.O.N.N.E.C.T.O.R_.M.O.D.E%29" class="stt" data-pltdoc="x">REACH_CONNECTOR_MODE</a> that matches
<span class="RktInBG"><span class="hspace"></span><span class="RktIn">$NET-devnet</span><span class="hspace"></span></span> for all valid <span class="RktInBG"><span class="hspace"></span><span class="RktIn">$NET</span><span class="hspace"></span></span>, or when <a name="(env._.R.E.A.C.H_.I.S.O.L.A.T.E.D_.N.E.T.W.O.R.K)"></a><a name="(idx._(gentag._465))"></a><span class="stt">REACH_ISOLATED_NETWORK</span> is set.</p><p>You may provide an optional <code class="highlight"><font class="badlink"><span class="nx">onProgress</span></font></code> callback, used for reporting progress,
which may be called many times up until the specified <a href="ref-model.html#%28tech._network._time%29" class="techoutside" data-pltdoc="x"><span class="techinside">network time</span></a>.
It will receive an object with keys <code class="highlight"><font class="badlink"><span class="nx">current</span></font></code> and <code class="highlight"><font class="badlink"><span class="nx">target</span></font></code>,</p><p><span style="font-weight: bold">&#8212;<wbr></wbr></span></p><p><div class="highlight"><pre><span></span><a name="(javascript._((get.Network.Secs)))"></a><a name="(idx._(gentag._466))"></a><span class="nx">getNetworkSecs</span><span class="p">()</span> <span class="p">=&gt;</span> <font class="badlink"><span class="nb">Promise</span></font><font class="badlink"><span class="o">&lt;</span></font><font class="badlink"><span class="nx">secs</span></font><font class="badlink"><span class="o">&gt;</span></font>
</pre></div></p><p>Like <code class="highlight"><a href="#%28javascript._%28%28get.Network.Time%29%29%29" class="nx" data-pltdoc="x">getNetworkTime</a></code>, but returns a <a href="ref-model.html#%28tech._network._second%29" class="techoutside" data-pltdoc="x"><span class="techinside">network seconds</span></a> Promise.</p><p><span style="font-weight: bold">&#8212;<wbr></wbr></span></p><p><div class="highlight"><pre><span></span><a name="(javascript._((wait.Until.Secs)))"></a><a name="(idx._(gentag._467))"></a><span class="nx">waitUntilSecs</span><span class="p">(</span><font class="badlink"><span class="nx">secs</span></font><span class="p">,</span> <font class="badlink"><span class="nx">onProgress</span></font><font class="badlink"><span class="o">?</span></font><span class="p">)</span> <span class="p">=&gt;</span> <font class="badlink"><span class="nb">Promise</span></font><font class="badlink"><span class="o">&lt;</span></font><font class="badlink"><span class="nx">secs</span></font><font class="badlink"><span class="o">&gt;</span></font>
</pre></div></p><p>Like <code class="highlight"><a href="#%28javascript._%28%28wait.Until.Secs%29%29%29" class="nx" data-pltdoc="x">waitUntilSecs</a></code>, but waits for a certain <a href="ref-model.html#%28tech._network._second%29" class="techoutside" data-pltdoc="x"><span class="techinside">network seconds</span></a> deadline.</p><p><span style="font-weight: bold">&#8212;<wbr></wbr></span></p><p><div class="highlight"><pre><span></span><a name="(javascript._((wait)))"></a><a name="(idx._(gentag._468))"></a><span class="nx">wait</span><span class="p">(</span><font class="badlink"><span class="nx">timedelta</span></font><span class="p">,</span> <font class="badlink"><span class="nx">onProgress</span></font><font class="badlink"><span class="o">?</span></font><span class="p">)</span> <span class="p">=&gt;</span> <font class="badlink"><span class="nb">Promise</span></font><font class="badlink"><span class="o">&lt;</span></font><font class="badlink"><span class="nx">networkTime</span></font><font class="badlink"><span class="o">&gt;</span></font>
</pre></div></p><p>Returns a Promise that will only be resolved after the specified <a href="ref-model.html#%28tech._time._delta%29" class="techoutside" data-pltdoc="x"><span class="techinside">time delta</span></a> has elapsed.
The expression <code class="highlight"><font class="badlink"><span class="k">await</span></font> <a href="#%28javascript._%28%28wait%29%29%29" class="nx" data-pltdoc="x">wait</a><span class="p">(</span><font class="badlink"><span class="nx">delta</span></font><span class="p">,</span> <font class="badlink"><span class="nx">onProgress</span></font><span class="p">)</span></code> is the same as
<code class="highlight"><font class="badlink"><span class="k">await</span></font> <a href="#%28javascript._%28%28wait.Until.Time%29%29%29" class="nx" data-pltdoc="x">waitUntilTime</a><span class="p">(</span><a href="ref-frontends-js-utils.html#%28javascript._%28%28add%29%29%29" class="nx" data-pltdoc="x">add</a><span class="p">(</span><font class="badlink"><span class="k">await</span></font> <a href="#%28javascript._%28%28get.Network.Time%29%29%29" class="nx" data-pltdoc="x">getNetworkTime</a><span class="p">(),</span> <font class="badlink"><span class="nx">delta</span></font><span class="p">),</span> <font class="badlink"><span class="nx">onProgress</span></font><span class="p">)</span></code>.
As with <code class="highlight"><a href="#%28javascript._%28%28wait.Until.Time%29%29%29" class="nx" data-pltdoc="x">waitUntilTime</a></code>, the <code class="highlight"><font class="badlink"><span class="nx">onProgress</span></font></code> callback is optional.</p><p><span style="font-weight: bold">&#8212;<wbr></wbr></span></p><p><div class="highlight"><pre><span></span><a name="(javascript._((connector)))"></a><a name="(idx._(gentag._469))"></a><span class="nx">connector</span> <font class="badlink"><span class="o">:</span></font> <a href="ref-frontends-js-types.html#%28javascript._%28%28.Connector%29%29%29" class="nx" data-pltdoc="x">Connector</a> 
</pre></div></p><p>Represents the <code class="highlight"><a href="ref-frontends-js-types.html#%28javascript._%28%28.Connector%29%29%29" class="nx" data-pltdoc="x">Connector</a></code> the <code class="highlight"><a href="ref-frontends-js.html#%28javascript._%28%28stdlib%29%29%29" class="nx" data-pltdoc="x">stdlib</a></code> uses.</p><p><span style="font-weight: bold">&#8212;<wbr></wbr></span></p><p><div class="highlight"><pre><span></span><a name="(javascript._((set.Query.Lower.Bound)))"></a><a name="(idx._(gentag._470))"></a><span class="nx">setQueryLowerBound</span><span class="p">(</span><font class="badlink"><span class="nx">networkTime</span></font><span class="p">)</span> <span class="p">=&gt;</span> <span class="ow">void</span>
</pre></div></p><p>Sets the lower bound on querying the network for events.
The argument to this function is a <a href="ref-model.html#%28tech._network._time%29" class="techoutside" data-pltdoc="x"><span class="techinside">network time</span></a>.
By default, Reach will query for events from time 0.
This default is usually fine, but on certain networks like Conflux,
it can be very slow.
You can use this function to tell Reach to only query from a given network time onwards,
which can speed up event log querying significantly on Conflux.
If you use the reach stdlib to <code class="highlight"><a href="ref-frontends-js-ctc.html#%28javascript._%28%28deploy%29%29%29" class="nx" data-pltdoc="x">deploy</a></code> or <code class="highlight"><a href="ref-frontends-js-ctc.html#%28javascript._%28%28attach%29%29%29" class="nx" data-pltdoc="x">attach</a></code> to a contract,
the specified lower bound must be no later than the time at which the contract was deployed.</p><p><span style="font-weight: bold">&#8212;<wbr></wbr></span></p><p><div class="highlight"><pre><span></span><a name="(javascript._((set.Valid.Query.Window)))"></a><a name="(idx._(gentag._471))"></a><span class="nx">setValidQueryWindow</span><span class="p">(</span><font class="badlink"><span class="nx">width</span></font><font class="badlink"><span class="o">:</span></font> <font class="badlink"><span class="nx">number</span></font><font class="badlink"><span class="o">|</span></font><font class="badlink"><span class="kc">true</span></font><span class="p">)</span> <span class="p">=&gt;</span> <span class="ow">void</span>
</pre></div></p><p>Sets the maximum width of the query windows used to query the network for event logs.
The value <code class="highlight"><font class="badlink"><span class="kc">true</span></font></code> indicates that no window size should be used, and queries may span arbitrarily large window sizes.
While each connector has a default value that works for most common cases, tweaking this setting may be useful when dealing with layer two networks or custom endpoints that are more restrictive than normal nodes on the network.</p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search docs..." title="Enter a search string to search the Reach documentation" onkeypress="return reach_DoSearch(event, this);"></form>&nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="ref-frontends-js-ctc.html" title="backward to &quot;5.7.1.4 Contract Handles&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="ref-frontends-js.html" title="up to &quot;5.7.1 JavaScript&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="ref-frontends-js-provider.html" title="forward to &quot;5.7.1.6 Provider Selection&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div><script src="reach-post.js"></script></body></html>