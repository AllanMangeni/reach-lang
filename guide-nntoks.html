<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-149147406-2"></script><script>window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-149147406-2');</script><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js"></script><script src="tooltips.js"></script><script src="reach-pre.js"></script><link rel="stylesheet" href="tooltips.css"><link rel="stylesheet" href="reach.css"><link rel="stylesheet" href="minted.css"><link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png"><link rel="manifest" href="/favicon/site.webmanifest"><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>3.6&nbsp;How do network and non-network tokens differ?</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Reach:<span class="mywbr"> &nbsp;</span> The Safest and Easiest DApp Programming Language</a></td></tr></table></div><div class="tocviewsublisttop" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="overview.html" class="tocviewlink" data-pltdoc="x">Overview</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="tut.html" class="tocviewlink" data-pltdoc="x">Tutorial</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="guide.html" class="tocviewselflink" data-pltdoc="x">Guide</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="workshop.html" class="tocviewlink" data-pltdoc="x">Workshop</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="ref.html" class="tocviewlink" data-pltdoc="x">Reference</a></td></tr><tr><td align="right"></td><td><a href="doc-index.html" class="tocviewlink" data-pltdoc="x">Index</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9660;</a></td><td>3&nbsp;</td><td><a href="guide.html" class="tocviewlink" data-pltdoc="x">Guide</a></td></tr></table><div class="tocviewsublist" style="display: block;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">3.1&nbsp;</td><td><a href="guide-windows.html" class="tocviewlink" data-pltdoc="x">Using Reach on Windows</a></td></tr><tr><td align="right">3.2&nbsp;</td><td><a href="guide-versions.html" class="tocviewlink" data-pltdoc="x">How does Reach use version numbers?</a></td></tr><tr><td align="right">3.3&nbsp;</td><td><a href="guide-solidity.html" class="tocviewlink" data-pltdoc="x">How does Reach development compare to Solidity development?</a></td></tr><tr><td align="right">3.4&nbsp;</td><td><a href="guide-rpc.html" class="tocviewlink" data-pltdoc="x">Do I have to use Java<span class="mywbr"> &nbsp;</span>Script to write my frontend? What about Python, Go, or other languages?</a></td></tr><tr><td align="right">3.5&nbsp;</td><td><a href="guide-logging.html" class="tocviewlink" data-pltdoc="x">How do I add tracing logs to my Reach program?</a></td></tr><tr><td align="right">3.6&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">How do network and non-<wbr></wbr>network tokens differ?</a></td></tr><tr><td align="right">3.7&nbsp;</td><td><a href="guide-ctransfers.html" class="tocviewlink" data-pltdoc="x">What do the different kinds of consensus transfers mean? <span class="stt">publish</span>, <span class="stt">pay</span>, <span class="stt">race</span>, <span class="stt">fork</span>, <span class="stt">parallel<span class="mywbr"> &nbsp;</span>Reduce</span>?</a></td></tr><tr><td align="right">3.8&nbsp;</td><td><a href="guide-assert.html" class="tocviewlink" data-pltdoc="x">How and what to verify</a></td></tr><tr><td align="right">3.9&nbsp;</td><td><a href="guide-loop-invs.html" class="tocviewlink" data-pltdoc="x">Finding and using loop invariants</a></td></tr><tr><td align="right">3.10&nbsp;</td><td><a href="guide-timeout.html" class="tocviewlink" data-pltdoc="x">Non-<wbr></wbr>participation:<span class="mywbr"> &nbsp;</span> What it is and how to protect against it</a></td></tr><tr><td align="right">3.11&nbsp;</td><td><a href="guide-determ.html" class="tocviewlink" data-pltdoc="x">Determinism, simultaneity, and choice in decentralized applications</a></td></tr><tr><td align="right">3.12&nbsp;</td><td><a href="guide-race.html" class="tocviewlink" data-pltdoc="x">Racing non-<wbr></wbr>determinism in decentralized applications</a></td></tr><tr><td align="right">3.13&nbsp;</td><td><a href="guide-abstract.html" class="tocviewlink" data-pltdoc="x">Building decentralized abstractions</a></td></tr><tr><td align="right">3.14&nbsp;</td><td><a href="guide-ganache.html" class="tocviewlink" data-pltdoc="x">How to use Ganache with Reach</a></td></tr><tr><td align="right">3.15&nbsp;</td><td><a href="guide-editor-support.html" class="tocviewlink" data-pltdoc="x">IDE/<span class="mywbr"> &nbsp;</span>Text Editor Support</a></td></tr><tr><td align="right">3.16&nbsp;</td><td><a href="guide-packages.html" class="tocviewlink" data-pltdoc="x">Sharing and discovering shared Reach packages</a></td></tr><tr><td align="right">3.17&nbsp;</td><td><a href="guide-reach.html" class="tocviewlink" data-pltdoc="x">How does Reach work?</a></td></tr><tr><td align="right">3.18&nbsp;</td><td><a href="guide-limits.html" class="tocviewlink" data-pltdoc="x">What are Reach&rsquo;s limitations?</a></td></tr><tr><td align="right">3.19&nbsp;</td><td><a href="guide-roadmap.html" class="tocviewlink" data-pltdoc="x">Reach&rsquo;s Roadmap</a></td></tr><tr><td align="right">3.20&nbsp;</td><td><a href="guide-changelog.html" class="tocviewlink" data-pltdoc="x">Reach&rsquo;s Changelog</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_2&quot;);">&#9658;</a></td><td>3.6&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">How do network and non-<wbr></wbr>network tokens differ?</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_2"><table cellspacing="0" cellpadding="0"><tr><td align="right">3.6.1&nbsp;</td><td><a href="#%28part._.How_do_network_tokens_behave_%29" class="tocviewlink" data-pltdoc="x">How do network tokens behave?</a></td></tr><tr><td align="right">3.6.2&nbsp;</td><td><a href="#%28part._.How_do_non-network_tokens_violate_this_%29" class="tocviewlink" data-pltdoc="x">How do non-<wbr></wbr>network tokens violate this?</a></td></tr><tr><td align="right">3.6.3&nbsp;</td><td><a href="#%28part._.Why_does_this_matter_%29" class="tocviewlink" data-pltdoc="x">Why does this matter?</a></td></tr><tr><td align="right">3.6.4&nbsp;</td><td><a href="#%28part._.What_does_.Reach_do_about_this_%29" class="tocviewlink" data-pltdoc="x">What does Reach do about this?</a></td></tr><tr><td align="right">3.6.5&nbsp;</td><td><a href="#%28part._.What_can_.I_do_about_it_%29" class="tocviewlink" data-pltdoc="x">What can I do about it?</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">3.6.1<tt>&nbsp;</tt></span><a href="#%28part._.How_do_network_tokens_behave_%29" class="tocsubseclink" data-pltdoc="x">How do network tokens behave?</a></td></tr><tr><td><span class="tocsublinknumber">3.6.2<tt>&nbsp;</tt></span><a href="#%28part._.How_do_non-network_tokens_violate_this_%29" class="tocsubseclink" data-pltdoc="x">How do non-<wbr></wbr>network tokens violate this?</a></td></tr><tr><td><span class="tocsublinknumber">3.6.3<tt>&nbsp;</tt></span><a href="#%28part._.Why_does_this_matter_%29" class="tocsubseclink" data-pltdoc="x">Why does this matter?</a></td></tr><tr><td><span class="tocsublinknumber">3.6.4<tt>&nbsp;</tt></span><a href="#%28part._.What_does_.Reach_do_about_this_%29" class="tocsubseclink" data-pltdoc="x">What does Reach do about this?</a></td></tr><tr><td><span class="tocsublinknumber">3.6.5<tt>&nbsp;</tt></span><a href="#%28part._.What_can_.I_do_about_it_%29" class="tocsubseclink" data-pltdoc="x">What can I do about it?</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">0.1.7</span></div><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search docs..." title="Enter a search string to search the Reach documentation" onkeypress="return reach_DoSearch(event, this);"></form>&nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="guide-logging.html" title="backward to &quot;3.5 How do I add tracing logs to my Reach program?&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="guide.html" title="up to &quot;3 Guide&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="guide-ctransfers.html" title="forward to &quot;3.7 What do the different kinds of consensus transfers mean? publish, pay, race, fork, parallelReduce?&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h4>3.6<tt>&nbsp;</tt><a name="(part._guide-nntoks)"></a>How do network and non-network tokens differ?</h4><p>Reach assumes that <a href="ref-model.html#%28tech._network._token%29" class="techoutside" data-pltdoc="x"><span class="techinside">network tokens</span></a> and <a href="ref-model.html#%28tech._non._network._token%29" class="techoutside" data-pltdoc="x"><span class="techinside">non-network tokens</span></a> behave identically on <a href="ref-model.html#%28tech._consensus._network%29" class="techoutside" data-pltdoc="x"><span class="techinside">consensus networks</span></a>, but this is not the case in practice.</p><h5>3.6.1<tt>&nbsp;</tt><a name="(part._.How_do_network_tokens_behave_)"></a>How do network tokens behave?</h5><p>An account on a consensus network can hold network tokens and as long as the network is available, it may send these tokens to other accounts or receive tokens from other accounts without preapproval from recipients and without the interference of third-parties not involved in a particular transfer.
Each network may prescribe fees on transfers or other similar constraints on transfers (such as a minimum balance holding to send funds) but may not restrict the reception of funds or arbitrarily hold or reclaim network tokens.
All consensus networks that Reach supports obey these properties.</p><h5>3.6.2<tt>&nbsp;</tt><a name="(part._.How_do_non-network_tokens_violate_this_)"></a>How do non-network tokens violate this?</h5><p>In each of the networks supported by Reach, non-network tokens may violate these expectations.</p><p>On Ethereum, and Ethereum-like networks, where non-network tokens are just particular patterns of smart contracts, the concrete behavior of abstract operations like "Transfer 10 Zorkmids from John to Paul" may have arbitrary semantics.
For example, a smart contract insisting that Paul pre-approve the reception of Zorkmids;
a smart contract could allow all transfers to be universally halted, like an old-fashioned bank closure;
a smart contract could simply take John&rsquo;s Zorkmids away because the administrator of the token decides to;
and so on.
Smart contracts have power to implement arbitrary semantics and there is no guarantee that a smart contract that supplies a function with the name <span class="stt">transfer</span> and the signature <span class="stt">function transfer(address _to, uint256 _value) public returns (bool success)</span> has any particular behavior.
Furthermore, you can send network tokens to a contract as you create it, but you cannot send non-network tokens, because sending non-network tokens (using ERC-20) requires knowing a contract&rsquo;s address, which you cannot know until after you create it (unless you use a particular low-level creation operation).</p><p>On Algorand, non-network tokens are built into the network, so they have a stable and predictable semantics, but that semantics is different than network tokens.
For example, non-network token reception must be pre-approved so John cannot transfer to Paul unless Paul has predetermined he is willing to accept Zorkmids.
Furthermore, non-network token creation supports options which have further differences:
it may be possible to "freeze" all transfers, so that no one can make any transfers; and,
it may be possible to "clawback" balances, so that John&rsquo;s Zorkmids can be removed from his account without his intervention.</p><p>On each network, it is possible to minimize these differences&#8212;<wbr></wbr>by disabling these options and obeying a standard semantics&#8212;<wbr></wbr>but that behavior is not universal among all tokens.</p><p>Non-network tokens minted by Reach always disable these options and behave as closely as possible to network tokens.</p><h5>3.6.3<tt>&nbsp;</tt><a name="(part._.Why_does_this_matter_)"></a>Why does this matter?</h5><p>These issues matter because developers and users of their applications need to understand that when they interact with a non-network token, they are interacting with a third party that can potentially control their application&rsquo;s behavior.</p><p>For example, suppose George and Ringo decide to play poker on a consensus network and bet Zorkmids, rather than network tokens.
If the manager of Zorkmids, Zorkmanager, freezes them, then the game must stop.
If the game requires that hands be provided in a timely fashion, then George could bribe Zorkmanager to freeze them every time it is Ringo&rsquo;s turn, forcing him to forfeit a round.</p><p>Suppose at the end of the game, there is a pot of 200 Zorkmids with 5 meant for George and 195 meant for Ringo.
If Zorkmanager takes 1 Zorkmid from the pot via "clawback", then only one of the parties can be paid in full.
What&rsquo;s worse, an application may be programmed to either transfer everything or nothing, so in this scenario if George extracts first, then Ringo will not be able to extract anything.
Furthermore, suppose the application is programmed to clear the pot atomically, disbursing to each player in one single step;
in this scenario, if recipients are required to pre-authorize holding a token, then George can revoke that permission to spite Ringo and prevent him from getting his allocation.</p><p>In summary, non-network tokens&rsquo; semantics are non-intuitive considering the power given to their creators.</p><h5>3.6.4<tt>&nbsp;</tt><a name="(part._.What_does_.Reach_do_about_this_)"></a>What does Reach do about this?</h5><p><div class="SIntrapara">Reach uses a verification engine to model the semantics of Reach programs to predict and reason about their behavior.
In particular, it tries to prove two theorems:
</div><div class="SIntrapara"><ul><li><p><span style="font-weight: bold">Honesty</span>: Honest participants will not submit transactions that will be rejected.</p></li><li><p><span style="font-weight: bold">Progress</span>: If honest participants submit transactions, the program will finish.</p></li></ul></div></p><p>If a program contains an operation such as "Transfer 10 tokens to John", then there are certain pre-conditions that must be true for this operation to succeed, such as "The contract holds at least 10 tokens".
Reach will guarantee that every pre-condition in the program is entailed by the earlier parts of the program.
When pre-conditions depend on user input, it will ensure that honest participants check that input before submitting the transaction.</p><p>Non-network tokens, because they are arbitrary code on some networks and depend on transient state controlled by third-parties on other networks, have no semantics, and therefore, have no predictable pre-conditions.
This means that it is impossible to predict whether an operation will succeed or fail simply by knowing it (for example) follows the ERC-20 specification or is an Algorand Standard Asset.</p><p>In our design of Reach, we had three choices when contemplating how to manage such unpredictability.</p><p>First, we could represent non-network token operations as free terms with no semantics, and thus unpredictable behavior.
We did not do this, because users expect they&rsquo;ll have a particular behavior (most actually do!) and expect that Reach&rsquo;s token linearity verification will apply to non-network tokens as well.</p><p>Second, we could explicitly represent the details of the power each network gives to non-network token creators and include their state space in the analysis of Reach programs.
We did not do this, because it is impossible to write programs that are generic in the non-network tokens they use with this token.
In other words, a Reach program that implemented a poker game couldn&rsquo;t be constructed to use <span class="emph">some</span> token.
Rather, it would have to be a game that used <span class="emph">Zorkmids</span>, and you&rsquo;d have to write (or verify) another program for a game that used <span class="emph">Gil</span>, and so on.
Given that most tokens actually behave properly, this would be unnecessarily painful for productive programming.</p><p>Third, we can assume that non-network tokens behave the same as network tokens and document the differences and educate developers and users about the consequences of this.
Clearly, this is what we did.</p><h5>3.6.5<tt>&nbsp;</tt><a name="(part._.What_can_.I_do_about_it_)"></a>What can I do about it?</h5><p>First, if you use non-network tokens, you need to understand that you are trusting the token issuer as much as you are trusting the consensus network itself.
This means that you need to audit its code, or configuration, and decide if you can place trust in its manager.</p><p>Second, if your token requires pre-authorization of receipt, and if this pre-authorization can be revoked, you need to remove atomic simultaneous transfers of non-network tokens from your program and replace them with phases where each party can receive their tokens individually, so that one party cannot maliciously opt-out to prevent the other party from receiving their funds.</p><p>Finally, you can advocate, perhaps with your money and support, that consensus networks pursue giving non-network tokens feature parity with network tokens so that there will be a consensus network that can faithfully implement the token semantics users expect.</p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search docs..." title="Enter a search string to search the Reach documentation" onkeypress="return reach_DoSearch(event, this);"></form>&nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="guide-logging.html" title="backward to &quot;3.5 How do I add tracing logs to my Reach program?&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="guide.html" title="up to &quot;3 Guide&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="guide-ctransfers.html" title="forward to &quot;3.7 What do the different kinds of consensus transfers mean? publish, pay, race, fork, parallelReduce?&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div><script src="reach-post.js"></script></body></html>