<p>
  <i id="p_0" class="pid"></i>This is an informal overview of Reach and the structure of a Reach program.
  The goal of this document is to give enough technical specifics to help you understand what Reach does, but it isn't intended as either a <a href="/tut/rps/#tut">tutorial</a> or a <a href="/tool/#ref">reference</a>.
  When you're ready to really begin a project, you can start with one of those, or <a href="/workshop/#workshop">the workshop</a>.<a href="#p_0" class="pid">0</a>
</p>
<p><i id="p_1" class="pid"></i>If you have experience with blockchain development using existing tools, we recommend reading this article and <a href="/guide/solidity/#guide-solidity">a comparison with other development platforms</a>.<a href="#p_1" class="pid">1</a></p>
<div class="note">
  <p><i id="p_2" class="pid"></i>A recording of a live workshop that goes over this material is <a href="https://www.youtube.com/watch?v=1jmi8XdOvD4">available on YouTube</a>.<a href="#p_2" class="pid">2</a></p>
</div>
<h2 id="over-model" class="refHeader">Decentralized applications<a aria-hidden="true" tabindex="-1" href="#over-model"><span class="icon icon-link"></span></a></h2>
<p>
  <i id="p_3" class="pid"></i>DApps are made of multiple agents interacting with each other through some backend consensus network, like Ethereum or Algorand.
  These agents act on behalf of principals that provide direction and authority through information.
  These principals might be humans or other autonomous agents or even committees and organizations with their own structure.
  The consensus network allows these agents to transfer and receive value in the form of network-specific tokens, like ETH or ALGO.
  The network also allows the creation of "contracts" that ensure that all agents follow the same rules as they take turns computing and publishing values and information.
  The details of these "contracts" are specific to each consensus network, but they are implicitly trusted by all agents and principals because their operation can be independently verified to match the previously agreed-upon rules.<a href="#p_3" class="pid">3</a>
</p>
<p><i id="p_4" class="pid"></i>A single Reach program incorporates all aspects of a DApp:<a href="#p_4" class="pid">4</a></p>
<ul>
  <li><i id="p_5" class="pid"></i>Participant backends are the agents acting on behalf of the principals.<a href="#p_5" class="pid">5</a></li>
  <li><i id="p_6" class="pid"></i>Frontends are the technical representation of the interface between the participants and the principals.<a href="#p_6" class="pid">6</a></li>
  <li><i id="p_7" class="pid"></i>A contract enforces the rules of the program, including the order of operation.<a href="#p_7" class="pid">7</a></li>
</ul>
<p>
  <i id="p_8" class="pid"></i>In Reach, a programmer only needs to specify the actions of participants---what they do individually and what they do in unison.
  The Reach compiler automatically derives a contract for the consensus network via a connector that enforces these rules.<a href="#p_8" class="pid">8</a>
</p>
<h2 id="over-minimal" class="refHeader">A minimal Reach program<a aria-hidden="true" tabindex="-1" href="#over-minimal"><span class="icon icon-link"></span></a></h2>
<p><i id="p_9" class="pid"></i>Let's look at a simple Reach program where two principals, Alice and Bob, interact. In this DApp, Alice has some information that Bob might want and she has an amount of network tokens in mind that she'd like to trade for it.<a href="#p_9" class="pid">9</a></p>
<div class="note">
  <p><i id="p_10" class="pid"></i>You can look at the entire example program by visiting <a href="https://github.com/reach-sh/reach-lang/tree/master/examples/overview/index.rsh">overview/index.rsh</a>.<a href="#p_10" class="pid">10</a></p>
</div>
<div class="note">
  <p><i id="p_11" class="pid"></i>Get language support for Reach in your editor by visiting <a href="/guide/editor-support/#guide-editor-support">the guide on editor support</a>.<a href="#p_11" class="pid">11</a></p>
</div>
<p><i id="p_12" class="pid"></i>The main part of the program looks like this:<a href="#p_12" class="pid">12</a></p>
<pre class="snippet numbered"><div class="codeHeader"><a href="https://github.com/reach-sh/reach-lang/tree/master/examples/overview/index.rsh">/examples/overview/index.rsh</a><a class="far fa-copy copyBtn" data-clipboard-text="'reach 0.1';
'use strict';

export const main = Reach.App(() => {
  const A = Participant('Alice', {
    request: UInt,
    info: Bytes(128),
  });
  const B = Participant('Bob', {
    want: Fun([UInt], Null),
    got: Fun([Bytes(128)], Null),
  });
  deploy();

  A.only(() => {
    const request = declassify(interact.request); });
  A.publish(request);
  commit();

  B.only(() => {
    interact.want(request); });
  B.pay(request);
  commit();

  A.only(() => {
    const info = declassify(interact.info); });
  A.publish(info);
  transfer(request).to(A);
  commit();

  B.only(() => {
    interact.got(info); });
  exit();
});" href="#"></a></div><ol class="snippet"><li value="1"><span style="color: #0A3069">'reach 0.1'</span><span style="color: #24292F">;</span></li><li value="2"><span style="color: #0A3069">'use strict'</span><span style="color: #24292F">;</span></li><li value="3"></li><li value="4"><span style="color: #CF222E">export</span><span style="color: #24292F"> </span><span style="color: #CF222E">const</span><span style="color: #24292F"> </span><span style="color: #0550AE">main</span><span style="color: #24292F"> </span><span style="color: #CF222E">=</span><span style="color: #24292F"> Reach.</span><span style="color: #8250DF">App</span><span style="color: #24292F">(() </span><span style="color: #CF222E">=&gt;</span><span style="color: #24292F"> {</span></li><li value="5"><span style="color: #24292F">  </span><span style="color: #CF222E">const</span><span style="color: #24292F"> </span><span style="color: #0550AE">A</span><span style="color: #24292F"> </span><span style="color: #CF222E">=</span><span style="color: #24292F"> </span><span style="color: #8250DF">Participant</span><span style="color: #24292F">(</span><span style="color: #0A3069">'Alice'</span><span style="color: #24292F">, {</span></li><li value="6"><span style="color: #24292F">    request: UInt,</span></li><li value="7"><span style="color: #24292F">    info: </span><span style="color: #8250DF">Bytes</span><span style="color: #24292F">(</span><span style="color: #0550AE">128</span><span style="color: #24292F">),</span></li><li value="8"><span style="color: #24292F">  });</span></li><li value="9"><span style="color: #24292F">  </span><span style="color: #CF222E">const</span><span style="color: #24292F"> </span><span style="color: #0550AE">B</span><span style="color: #24292F"> </span><span style="color: #CF222E">=</span><span style="color: #24292F"> </span><span style="color: #8250DF">Participant</span><span style="color: #24292F">(</span><span style="color: #0A3069">'Bob'</span><span style="color: #24292F">, {</span></li><li value="10"><span style="color: #24292F">    want: </span><span style="color: #8250DF">Fun</span><span style="color: #24292F">([UInt], Null),</span></li><li value="11"><span style="color: #24292F">    got: </span><span style="color: #8250DF">Fun</span><span style="color: #24292F">([</span><span style="color: #8250DF">Bytes</span><span style="color: #24292F">(</span><span style="color: #0550AE">128</span><span style="color: #24292F">)], Null),</span></li><li value="12"><span style="color: #24292F">  });</span></li><li value="13"><span style="color: #24292F">  </span><span style="color: #8250DF">deploy</span><span style="color: #24292F">();</span></li><li value="14"></li><li value="15"><span style="color: #24292F">  </span><span style="color: #0550AE">A</span><span style="color: #24292F">.</span><span style="color: #8250DF">only</span><span style="color: #24292F">(() </span><span style="color: #CF222E">=&gt;</span><span style="color: #24292F"> {</span></li></ol></pre>
<ul>
  <li><i id="p_13" class="pid"></i>Line 1 specifies that this is a Reach program.<a href="#p_13" class="pid">13</a></li>
  <li><i id="p_14" class="pid"></i>Line 2 specifies that this program will be compiled with strict mode, which enables unused variable checks.<a href="#p_14" class="pid">14</a></li>
  <li><i id="p_15" class="pid"></i>Line 4 defines the main export from this program. <code>main</code> is the default used by Reach.<a href="#p_15" class="pid">15</a></li>
  <li><i id="p_16" class="pid"></i>Line 4 also specifies that it is an application.<a href="#p_16" class="pid">16</a></li>
  <li><i id="p_17" class="pid"></i>Line 5 specifies that the program identifier <span class="snip"><span style="color: #0550AE">A</span></span> will represent the Alice participant.<a href="#p_17" class="pid">17</a></li>
  <li><i id="p_18" class="pid"></i>Lines 6 and 7 specify the interface between Alice's participant and frontend. In this case, Alice's frontend must provide a number called <code>request</code> and a string called <code>info</code>.<a href="#p_18" class="pid">18</a></li>
  <li><i id="p_19" class="pid"></i>Line 9 specifies that the program identifier <span class="snip"><span style="color: #0550AE">B</span></span> will represent the Bob participant.<a href="#p_19" class="pid">19</a></li>
  <li><i id="p_20" class="pid"></i>Lines 10 and 11 specify the interface for Bob, which includes a function named <code>want</code>, that takes a number and returns <span class="snip"><span style="color: #0550AE">null</span></span>, as well as a function named <code>got</code>, that receives the information.<a href="#p_20" class="pid">20</a></li>
  <li><i id="p_21" class="pid"></i>Finally, line 13, deploys the DApp.<a href="#p_21" class="pid">21</a></li>
</ul>
<p><i id="p_22" class="pid"></i>The elided lines, 14 through 34, contain the body of the application, which we can divide into four parts.<a href="#p_22" class="pid">22</a></p>
<pre class="snippet numbered"><div class="codeHeader"><a href="https://github.com/reach-sh/reach-lang/tree/master/examples/overview/index.rsh">/examples/overview/index.rsh</a><a class="far fa-copy copyBtn" data-clipboard-text="'reach 0.1';
'use strict';

export const main = Reach.App(() => {
  const A = Participant('Alice', {
    request: UInt,
    info: Bytes(128),
  });
  const B = Participant('Bob', {
    want: Fun([UInt], Null),
    got: Fun([Bytes(128)], Null),
  });
  deploy();

  A.only(() => {
    const request = declassify(interact.request); });
  A.publish(request);
  commit();

  B.only(() => {
    interact.want(request); });
  B.pay(request);
  commit();

  A.only(() => {
    const info = declassify(interact.info); });
  A.publish(info);
  transfer(request).to(A);
  commit();

  B.only(() => {
    interact.got(info); });
  exit();
});" href="#"></a></div><ol class="snippet"><li value="15"><span style="color: #24292F">  </span><span style="color: #0550AE">A</span><span style="color: #24292F">.</span><span style="color: #8250DF">only</span><span style="color: #24292F">(() </span><span style="color: #CF222E">=&gt;</span><span style="color: #24292F"> {</span></li><li value="16"><span style="color: #24292F">    </span><span style="color: #CF222E">const</span><span style="color: #24292F"> </span><span style="color: #0550AE">request</span><span style="color: #24292F"> </span><span style="color: #CF222E">=</span><span style="color: #24292F"> </span><span style="color: #8250DF">declassify</span><span style="color: #24292F">(interact.request); });</span></li><li value="17"><span style="color: #24292F">  </span><span style="color: #0550AE">A</span><span style="color: #24292F">.</span><span style="color: #8250DF">publish</span><span style="color: #24292F">(request);</span></li><li value="18"><span style="color: #24292F">  </span><span style="color: #8250DF">commit</span><span style="color: #24292F">();</span></li></ol></pre>
<ul>
  <li>
    <i id="p_23" class="pid"></i>Lines 15 and 16 specify that Alice takes a local step where she declassifies the amount of tokens requested.
    In Reach, all values from the frontend are secret until explicitly made public with declassify.<a href="#p_23" class="pid">23</a>
  </li>
  <li><i id="p_24" class="pid"></i>Line 17 has Alice join the application by publishing that value, and the logic of the program transitions to specifying what the contract does.<a href="#p_24" class="pid">24</a></li>
  <li><i id="p_25" class="pid"></i>Line 18 has the contract commit to these values and continue the rest of the program.<a href="#p_25" class="pid">25</a></li>
</ul>
<p><i id="p_26" class="pid"></i>At this point, Bob's backend has learned the value of <span class="snip"><span style="color: #24292F">request</span></span> and can deliver it to Bob's frontend for his approval. This happens next.<a href="#p_26" class="pid">26</a></p>
<pre class="snippet numbered"><div class="codeHeader"><a href="https://github.com/reach-sh/reach-lang/tree/master/examples/overview/index.rsh">/examples/overview/index.rsh</a><a class="far fa-copy copyBtn" data-clipboard-text="'reach 0.1';
'use strict';

export const main = Reach.App(() => {
  const A = Participant('Alice', {
    request: UInt,
    info: Bytes(128),
  });
  const B = Participant('Bob', {
    want: Fun([UInt], Null),
    got: Fun([Bytes(128)], Null),
  });
  deploy();

  A.only(() => {
    const request = declassify(interact.request); });
  A.publish(request);
  commit();

  B.only(() => {
    interact.want(request); });
  B.pay(request);
  commit();

  A.only(() => {
    const info = declassify(interact.info); });
  A.publish(info);
  transfer(request).to(A);
  commit();

  B.only(() => {
    interact.got(info); });
  exit();
});" href="#"></a></div><ol class="snippet"><li value="20"><span style="color: #24292F">  </span><span style="color: #0550AE">B</span><span style="color: #24292F">.</span><span style="color: #8250DF">only</span><span style="color: #24292F">(() </span><span style="color: #CF222E">=&gt;</span><span style="color: #24292F"> {</span></li><li value="21"><span style="color: #24292F">    interact.</span><span style="color: #8250DF">want</span><span style="color: #24292F">(request); });</span></li><li value="22"><span style="color: #24292F">  </span><span style="color: #0550AE">B</span><span style="color: #24292F">.</span><span style="color: #8250DF">pay</span><span style="color: #24292F">(request);</span></li><li value="23"><span style="color: #24292F">  </span><span style="color: #8250DF">commit</span><span style="color: #24292F">();</span></li></ol></pre>
<ul>
  <li>
    <i id="p_27" class="pid"></i>Lines 20 and 21 have Bob perform that delivery.
    <span class="snip"><span style="color: #24292F">interact.want</span></span> doesn't explicitly return a boolean because the frontend cannot return if Bob doesn't want to continue.
    A better version of this program might return <span class="snip"><span style="color: #0550AE">false</span></span> and have that communicated to Alice.<a href="#p_27" class="pid">27</a>
  </li>
  <li><i id="p_28" class="pid"></i>Lines 22 and 23 have Bob join the application and submit a payment matching the appropriate amount, and then the contract commits.<a href="#p_28" class="pid">28</a></li>
</ul>
<p><i id="p_29" class="pid"></i>It's now Alice's turn again:<a href="#p_29" class="pid">29</a></p>
<pre class="snippet numbered"><div class="codeHeader"><a href="https://github.com/reach-sh/reach-lang/tree/master/examples/overview/index.rsh">/examples/overview/index.rsh</a><a class="far fa-copy copyBtn" data-clipboard-text="'reach 0.1';
'use strict';

export const main = Reach.App(() => {
  const A = Participant('Alice', {
    request: UInt,
    info: Bytes(128),
  });
  const B = Participant('Bob', {
    want: Fun([UInt], Null),
    got: Fun([Bytes(128)], Null),
  });
  deploy();

  A.only(() => {
    const request = declassify(interact.request); });
  A.publish(request);
  commit();

  B.only(() => {
    interact.want(request); });
  B.pay(request);
  commit();

  A.only(() => {
    const info = declassify(interact.info); });
  A.publish(info);
  transfer(request).to(A);
  commit();

  B.only(() => {
    interact.got(info); });
  exit();
});" href="#"></a></div><ol class="snippet"><li value="25"><span style="color: #24292F">  </span><span style="color: #0550AE">A</span><span style="color: #24292F">.</span><span style="color: #8250DF">only</span><span style="color: #24292F">(() </span><span style="color: #CF222E">=&gt;</span><span style="color: #24292F"> {</span></li><li value="26"><span style="color: #24292F">    </span><span style="color: #CF222E">const</span><span style="color: #24292F"> </span><span style="color: #0550AE">info</span><span style="color: #24292F"> </span><span style="color: #CF222E">=</span><span style="color: #24292F"> </span><span style="color: #8250DF">declassify</span><span style="color: #24292F">(interact.info); });</span></li><li value="27"><span style="color: #24292F">  </span><span style="color: #0550AE">A</span><span style="color: #24292F">.</span><span style="color: #8250DF">publish</span><span style="color: #24292F">(info);</span></li><li value="28"><span style="color: #24292F">  </span><span style="color: #8250DF">transfer</span><span style="color: #24292F">(request).</span><span style="color: #8250DF">to</span><span style="color: #24292F">(</span><span style="color: #0550AE">A</span><span style="color: #24292F">);</span></li><li value="29"><span style="color: #24292F">  </span><span style="color: #8250DF">commit</span><span style="color: #24292F">();</span></li></ol></pre>
<ul>
  <li><i id="p_30" class="pid"></i>Lines 25 and 26 specify that Alice declassifies the information.<a href="#p_30" class="pid">30</a></li>
  <li><i id="p_31" class="pid"></i>Line 27 has her publish it.<a href="#p_31" class="pid">31</a></li>
  <li><i id="p_32" class="pid"></i>Line 28 has the contract transfer the requested amount to her.<a href="#p_32" class="pid">32</a></li>
  <li><i id="p_33" class="pid"></i>Line 29 commits the transactions on the consensus network.<a href="#p_33" class="pid">33</a></li>
</ul>
<p><i id="p_34" class="pid"></i>The only thing left is for Bob's backend to deliver the information to his frontend.<a href="#p_34" class="pid">34</a></p>
<pre class="snippet numbered"><div class="codeHeader"><a href="https://github.com/reach-sh/reach-lang/tree/master/examples/overview/index.rsh">/examples/overview/index.rsh</a><a class="far fa-copy copyBtn" data-clipboard-text="'reach 0.1';
'use strict';

export const main = Reach.App(() => {
  const A = Participant('Alice', {
    request: UInt,
    info: Bytes(128),
  });
  const B = Participant('Bob', {
    want: Fun([UInt], Null),
    got: Fun([Bytes(128)], Null),
  });
  deploy();

  A.only(() => {
    const request = declassify(interact.request); });
  A.publish(request);
  commit();

  B.only(() => {
    interact.want(request); });
  B.pay(request);
  commit();

  A.only(() => {
    const info = declassify(interact.info); });
  A.publish(info);
  transfer(request).to(A);
  commit();

  B.only(() => {
    interact.got(info); });
  exit();
});" href="#"></a></div><ol class="snippet"><li value="31"><span style="color: #24292F">  </span><span style="color: #0550AE">B</span><span style="color: #24292F">.</span><span style="color: #8250DF">only</span><span style="color: #24292F">(() </span><span style="color: #CF222E">=&gt;</span><span style="color: #24292F"> {</span></li><li value="32"><span style="color: #24292F">    interact.</span><span style="color: #8250DF">got</span><span style="color: #24292F">(info); });</span></li><li value="33"><span style="color: #24292F">  </span><span style="color: #8250DF">exit</span><span style="color: #24292F">();</span></li></ol></pre>
<ul>
  <li><i id="p_35" class="pid"></i>Line 31 and 32 use an interaction expression to transfer the information to the frontend.<a href="#p_35" class="pid">35</a></li>
  <li><i id="p_36" class="pid"></i>Line 33 exits the program.<a href="#p_36" class="pid">36</a></li>
</ul>
<hr>
<p><i id="p_37" class="pid"></i>Reach programmers don't need to think about details like <em>contract storage</em>, <em>protocol diagrams</em>, <em>state validation</em>, or <em>network details</em>; instead, they can focus exclusively on the business logic of their application.<a href="#p_37" class="pid">37</a></p>
<h2 id="over-compile" class="refHeader">Compile<a aria-hidden="true" tabindex="-1" href="#over-compile"><span class="icon icon-link"></span></a></h2>
<p><i id="p_38" class="pid"></i>After a Reach programmer writes this application in a file like <a href="https://github.com/reach-sh/reach-lang/tree/master/examples/overview/index.rsh"><code>overview/index.rsh</code></a>, they could run<a href="#p_38" class="pid">38</a></p>
<pre class="snippet unnumbered"><div class="codeHeader">&nbsp;<a class="far fa-copy copyBtn" data-clipboard-text="$ reach compile overview/index.rsh" href="#"></a></div><ol class="snippet"><li value="1">$ reach compile overview/index.rsh</li></ol></pre>
<p><i id="p_39" class="pid"></i>and the <code>build</code> directory will contain a new file named <a href="https://github.com/reach-sh/reach-lang/tree/master/examples/overview/build/index.main.mjs"><code>index.main.mjs</code></a>, which contains a JavaScript implementation of a backend for each participant, as well as the Ethereum bytecode for the contract.<a href="#p_39" class="pid">39</a></p>
<div class="note">
  <p>
    <i id="p_40" class="pid"></i>If you are curious, you can take a look at this file by going to <a href="https://github.com/reach-sh/reach-lang/tree/master/examples/overview/build/index.main.mjs">overview/build/index.main.mjs</a>.
    The Ethereum bytecode is not readable, but if you understand Solidity, you may want to look at <a href="https://github.com/reach-sh/reach-lang/tree/master/examples/overview/build/index.main.sol">overview/build/index.main.sol</a> to see the original Solidity source that it is compiled from.
    Reach can leave files like these in place when run with <code>--intermediate-files</code>.<a href="#p_40" class="pid">40</a>
  </p>
</div>
<p>
  <i id="p_41" class="pid"></i>For this thirty line application, the Reach compiler generated hundreds of lines of JavaScript code in two functions, one for Alice and one for Bob.
  Separately, it generated hundreds more lines of Solidity code to implement the contract.
  If a programmer wasn't using Reach, they would have to write all this code in these three modules individually and keep them synchronized at every step of the development process.<a href="#p_41" class="pid">41</a>
</p>
<p>
  <i id="p_42" class="pid"></i>Moreover, Reach doesn't only work for Ethereum: it is blockchain agnostic and can be easily configured to use a different connector to target a different consensus network, like Algorand.
  Nor is Reach tied to JavaScript: it can be configured to target other backend languages, like Go.<a href="#p_42" class="pid">42</a>
</p>
<h2 id="over-verify" class="refHeader">Verify<a aria-hidden="true" tabindex="-1" href="#over-verify"><span class="icon icon-link"></span></a></h2>
<p>
  <i id="p_43" class="pid"></i>Reach doesn't just compile your program: it also verifies it and ensures that entire categories of errors don't occur.
  For example, it always guarantees that the balance in the contract at the end of the program is zero.
  This is important because if it were not true, then tokens would be locked away by the contract and inaccessible.<a href="#p_43" class="pid">43</a>
</p>
<p>
  <i id="p_44" class="pid"></i>For this example program, it is obvious that when a single transfer of <span class="snip"><span style="color: #24292F">request</span></span> goes in at line 22 and a single transfer of <span class="snip"><span style="color: #24292F">request</span></span> goes out at line 28, then the balance is zero at the end of the program.
  We could make a small tweak, however, to demonstrate things going wrong.<a href="#p_44" class="pid">44</a>
</p>
<p><i id="p_45" class="pid"></i>Let's change the third step to leave a single unit in the balance:<a href="#p_45" class="pid">45</a></p>
<pre class="snippet numbered"><div class="codeHeader"><a href="https://github.com/reach-sh/reach-lang/tree/master/examples/overview/index-error.rsh">/examples/overview/index-error.rsh</a><a class="far fa-copy copyBtn" data-clipboard-text="'reach 0.1';
'use strict';

export const main = Reach.App(() => {
  const A = Participant('Alice', {
    request: UInt,
    info: Bytes(128),
  });
  const B = Participant('Bob', {
    want: Fun([UInt], Null),
    got: Fun([Bytes(128)], Null),
  });
  deploy();

  A.only(() => {
    const request = declassify(interact.request); });
  A.publish(request);
  commit();

  B.only(() => {
    interact.want(request); });
  B.pay(request);
  commit();

  A.only(() => {
    const info = declassify(interact.info); });
  A.publish(info);
  transfer(request-1).to(A); // <--- Oops!
  commit();

  B.only(() => {
    interact.got(info); });
  exit();
});" href="#"></a></div><ol class="snippet"><li value="25"><span style="color: #24292F">  </span><span style="color: #0550AE">A</span><span style="color: #24292F">.</span><span style="color: #8250DF">only</span><span style="color: #24292F">(() </span><span style="color: #CF222E">=&gt;</span><span style="color: #24292F"> {</span></li><li value="26"><span style="color: #24292F">    </span><span style="color: #CF222E">const</span><span style="color: #24292F"> </span><span style="color: #0550AE">info</span><span style="color: #24292F"> </span><span style="color: #CF222E">=</span><span style="color: #24292F"> </span><span style="color: #8250DF">declassify</span><span style="color: #24292F">(interact.info); });</span></li><li value="27"><span style="color: #24292F">  </span><span style="color: #0550AE">A</span><span style="color: #24292F">.</span><span style="color: #8250DF">publish</span><span style="color: #24292F">(info);</span></li><li value="28"><span style="color: #24292F">  </span><span style="color: #8250DF">transfer</span><span style="color: #24292F">(request</span><span style="color: #CF222E">-</span><span style="color: #0550AE">1</span><span style="color: #24292F">).</span><span style="color: #8250DF">to</span><span style="color: #24292F">(</span><span style="color: #0550AE">A</span><span style="color: #24292F">); </span><span style="color: #6E7781">// &lt;--- Oops!</span></li><li value="29"><span style="color: #24292F">  </span><span style="color: #8250DF">commit</span><span style="color: #24292F">();</span></li></ol></pre>
<p><i id="p_46" class="pid"></i>And then run the compiler:<a href="#p_46" class="pid">46</a></p>
<pre class="snippet unnumbered"><div class="codeHeader">&nbsp;<a class="far fa-copy copyBtn" data-clipboard-text="$ reach compile overview/index-error.rsh" href="#"></a></div><ol class="snippet"><li value="1">$ reach compile overview/index-error.rsh</li></ol></pre>
<p><i id="p_47" class="pid"></i>It will print out a detailed error message showing the violation.<a href="#p_47" class="pid">47</a></p>
<pre class="snippet numbered"><div class="codeHeader"><a href="https://github.com/reach-sh/reach-lang/tree/master/examples/overview/index-error.txt">/examples/overview/index-error.txt</a><a class="far fa-copy copyBtn" data-clipboard-text="Verifying knowledge assertions
Verifying for generic connector
  Verifying when ALL participants are honest
Verification failed:
  when ALL participants are honest
  of theorem: assert
  msg: &quot;balance zero at application exit&quot;
  at ./index-error.rsh:33:7:application

  // Violation Witness

  const v58 = &quot;Alice&quot;.interact.request;
  //    ^ could = 1
  //      from: ./index-error.rsh:6:12:property binding

  // Theorem Formalization

  const v87 = 0 == (v58 - (v58 - 1));
  //    ^ would be false
  assert(v87);

  Verifying when NO participants are honest
  Verifying when ONLY &quot;Alice&quot; is honest
  Verifying when ONLY &quot;Bob&quot; is honest
Checked 17 theorems; 4 failures (and 3 omitted repeats) :'(" href="#"></a></div><ol class="snippet"><li value="2">Verifying for generic connector</li><li value="3">  Verifying when ALL participants are honest</li><li value="4">Verification failed:</li><li value="5">  when ALL participants are honest</li><li value="6">  of theorem: assert</li><li value="7">  msg: "balance zero at application exit"</li><li value="8">  at ./index-error.rsh:33:7:application</li><li value="9"></li><li value="10">  // Violation Witness</li><li value="11"></li><li value="12">  const v58 = "Alice".interact.request;</li><li value="13">  //    ^ could = 1</li><li value="14">  //      from: ./index-error.rsh:6:12:property binding</li><li value="15"></li><li value="16">  // Theorem Formalization</li><li value="17"></li><li value="18">  const v87 = 0 == (v58 - (v58 - 1));</li><li value="19">  //    ^ would be false</li><li value="20">  assert(v87);</li><li value="21"></li><li value="22">  Verifying when NO participants are honest</li><li value="23">  Verifying when ONLY "Alice" is honest</li><li value="24">  Verifying when ONLY "Bob" is honest</li><li value="25">Checked 17 theorems; 4 failures (and 3 omitted repeats) :'(</li></ol></pre>
<p>
  <i id="p_48" class="pid"></i>Verification failures include a lot of information, such as a concrete counter-example showing values that could have been provided by frontends that would lead to the property failing to hold.
  In this case, it reports that if Alice were to pass an <span class="snip"><span style="color: #24292F">interact.request</span></span> over <span class="snip"><span style="color: #0550AE">1</span></span> at the start of the program on line 5, then the balance of the contract would not be provably <span class="snip"><span style="color: #0550AE">0</span></span> at the end of the program.<a href="#p_48" class="pid">48</a>
</p>
<hr>
<p>
  <i id="p_49" class="pid"></i>Reach programmers don't need to worry about entire categories of errors because the compiler automatically checks their code and ensures that those errors aren't present.
  Of course, there's a lot more to say about the details of <a href="/guide/assert/#guide-assert">automatic verification</a>; indeed, it is one of the most powerful features of Reach, but we'll leave it at that for now.<a href="#p_49" class="pid">49</a>
</p>
<h2 id="over-interface" class="refHeader">Interface<a aria-hidden="true" tabindex="-1" href="#over-interface"><span class="icon icon-link"></span></a></h2>
<p>
  <i id="p_50" class="pid"></i>The backend produced by the Reach compiler isn't an application on its own.
  In particular, each participant needs a frontend to interact with.
  In a real deployment, this interfacing code would be tied to a GUI, like a Web or smartphone app.
  Let's look at a simple command-line version that demonstrates how it would work for testing on a private devnet.<a href="#p_50" class="pid">50</a>
</p>
<div class="note">
  <p><i id="p_51" class="pid"></i>You can look at the entire example interface program by visiting <a href="https://github.com/reach-sh/reach-lang/tree/master/examples/overview/index.mjs">overview/index.mjs</a>.<a href="#p_51" class="pid">51</a></p>
</div>
<p><i id="p_52" class="pid"></i>The program is just a few dozen lines long and the shell of it is quite simple:<a href="#p_52" class="pid">52</a></p>
<pre class="snippet numbered"><div class="codeHeader"><a href="https://github.com/reach-sh/reach-lang/tree/master/examples/overview/index.mjs">/examples/overview/index.mjs</a><a class="far fa-copy copyBtn" data-clipboard-text="import { loadStdlib } from '@reach-sh/stdlib';
import * as backend from './build/index.main.mjs';

(async () => {
  const stdlib = await loadStdlib(process.env);

  const accAlice = await stdlib.newTestAccount(stdlib.parseCurrency(100));
  const accBob = await stdlib.newTestAccount(stdlib.parseCurrency(100));

  const ctcAlice = accAlice.contract(backend);
  const ctcBob = accBob.contract(backend, ctcAlice.getInfo());

  await Promise.all([
    ctcAlice.participants.Alice({
      request: stdlib.parseCurrency(5),
      info: 'If you wear these, you can see beyond evil illusions.'
    }),
    ctcBob.p.Bob({
      want: (amt) => console.log(`Alice asked Bob for ${stdlib.formatCurrency(amt)}`),
      got: (secret) => console.log(`Alice's secret is: ${secret}`),
    }),
  ]);
})();" href="#"></a></div><ol class="snippet"><li value="1"><span style="color: #CF222E">import</span><span style="color: #24292F"> { loadStdlib } </span><span style="color: #CF222E">from</span><span style="color: #24292F"> </span><span style="color: #0A3069">'@reach-sh/stdlib'</span><span style="color: #24292F">;</span></li><li value="2"><span style="color: #CF222E">import</span><span style="color: #24292F"> </span><span style="color: #0550AE">*</span><span style="color: #24292F"> </span><span style="color: #CF222E">as</span><span style="color: #24292F"> backend </span><span style="color: #CF222E">from</span><span style="color: #24292F"> </span><span style="color: #0A3069">'./build/index.main.mjs'</span><span style="color: #24292F">;</span></li><li value="3"></li><li value="4"><span style="color: #24292F">(</span><span style="color: #CF222E">async</span><span style="color: #24292F"> () </span><span style="color: #CF222E">=&gt;</span><span style="color: #24292F"> {</span></li><li value="5"><span style="color: #24292F">  </span><span style="color: #CF222E">const</span><span style="color: #24292F"> </span><span style="color: #0550AE">stdlib</span><span style="color: #24292F"> </span><span style="color: #CF222E">=</span><span style="color: #24292F"> </span><span style="color: #CF222E">await</span><span style="color: #24292F"> </span><span style="color: #8250DF">loadStdlib</span><span style="color: #24292F">(process.env);</span></li><li value="6"></li><li value="7"><span style="color: #24292F">  </span><span style="color: #CF222E">const</span><span style="color: #24292F"> </span><span style="color: #0550AE">accAlice</span><span style="color: #24292F"> </span><span style="color: #CF222E">=</span><span style="color: #24292F"> </span><span style="color: #CF222E">await</span><span style="color: #24292F"> stdlib.</span><span style="color: #8250DF">newTestAccount</span><span style="color: #24292F">(stdlib.</span><span style="color: #8250DF">parseCurrency</span><span style="color: #24292F">(</span><span style="color: #0550AE">100</span><span style="color: #24292F">));</span></li><li value="8"><span style="color: #24292F">  </span><span style="color: #CF222E">const</span><span style="color: #24292F"> </span><span style="color: #0550AE">accBob</span><span style="color: #24292F"> </span><span style="color: #CF222E">=</span><span style="color: #24292F"> </span><span style="color: #CF222E">await</span><span style="color: #24292F"> stdlib.</span><span style="color: #8250DF">newTestAccount</span><span style="color: #24292F">(stdlib.</span><span style="color: #8250DF">parseCurrency</span><span style="color: #24292F">(</span><span style="color: #0550AE">100</span><span style="color: #24292F">));</span></li><li value="9"></li><li value="10"><span style="color: #24292F">  </span><span style="color: #CF222E">const</span><span style="color: #24292F"> </span><span style="color: #0550AE">ctcAlice</span><span style="color: #24292F"> </span><span style="color: #CF222E">=</span><span style="color: #24292F"> accAlice.</span><span style="color: #8250DF">contract</span><span style="color: #24292F">(backend);</span></li><li value="11"><span style="color: #24292F">  </span><span style="color: #CF222E">const</span><span style="color: #24292F"> </span><span style="color: #0550AE">ctcBob</span><span style="color: #24292F"> </span><span style="color: #CF222E">=</span><span style="color: #24292F"> accBob.</span><span style="color: #8250DF">contract</span><span style="color: #24292F">(backend, ctcAlice.</span><span style="color: #8250DF">getInfo</span><span style="color: #24292F">());</span></li><li value="12"></li><li value="13"><span style="color: #24292F">  </span><span style="color: #CF222E">await</span><span style="color: #24292F"> </span><span style="color: #0550AE">Promise</span><span style="color: #24292F">.</span><span style="color: #8250DF">all</span><span style="color: #24292F">([</span></li><li value="14"><span style="color: #24292F">    ctcAlice.participants.</span><span style="color: #8250DF">Alice</span><span style="color: #24292F">({</span></li><li value="15"><span style="color: #24292F">      request: stdlib.</span><span style="color: #8250DF">parseCurrency</span><span style="color: #24292F">(</span><span style="color: #0550AE">5</span><span style="color: #24292F">),</span></li><li value="16"><span style="color: #24292F">      info: </span><span style="color: #0A3069">'If you wear these, you can see beyond evil illusions.'</span></li><li value="17"><span style="color: #24292F">    }),</span></li><li value="18"><span style="color: #24292F">    ctcBob.p.</span><span style="color: #8250DF">Bob</span><span style="color: #24292F">({</span></li><li value="19"><span style="color: #24292F">      </span><span style="color: #8250DF">want</span><span style="color: #24292F">: (</span><span style="color: #953800">amt</span><span style="color: #24292F">) </span><span style="color: #CF222E">=&gt;</span><span style="color: #24292F"> console.</span><span style="color: #8250DF">log</span><span style="color: #24292F">(</span><span style="color: #0A3069">`Alice asked Bob for ${</span><span style="color: #24292F">stdlib</span><span style="color: #0A3069">.</span><span style="color: #8250DF">formatCurrency</span><span style="color: #0A3069">(</span><span style="color: #24292F">amt</span><span style="color: #0A3069">)</span><span style="color: #0A3069">}`</span><span style="color: #24292F">),</span></li><li value="20"><span style="color: #24292F">      </span><span style="color: #8250DF">got</span><span style="color: #24292F">: (</span><span style="color: #953800">secret</span><span style="color: #24292F">) </span><span style="color: #CF222E">=&gt;</span><span style="color: #24292F"> console.</span><span style="color: #8250DF">log</span><span style="color: #24292F">(</span><span style="color: #0A3069">`Alice's secret is: ${</span><span style="color: #24292F">secret</span><span style="color: #0A3069">}`</span><span style="color: #24292F">),</span></li><li value="21"><span style="color: #24292F">    }),</span></li><li value="22"><span style="color: #24292F">  ]);</span></li><li value="23"><span style="color: #24292F">})();</span></li></ol></pre>
<ul>
  <li><i id="p_53" class="pid"></i>Lines 1 and 2 import the Reach standard library loader and the compiled app backend.<a href="#p_53" class="pid">53</a></li>
  <li>
    <i id="p_54" class="pid"></i>Line 5 dynamically loads the appropriate network-specific Reach standard library,
    based on the <code>REACH_CONNECTOR_MODE</code> environment variable.
    All of Reach's network-specific standard libraries adhere to a common interface allowing you to write programs that are network-agnostic.<a href="#p_54" class="pid">54</a>
  </li>
  <li><i id="p_55" class="pid"></i>Lines 7 and 8 initialize new test accounts for Alice and Bob.<a href="#p_55" class="pid">55</a></li>
  <li><i id="p_56" class="pid"></i>Line 10 has Alice deploy the contract on the consensus network.<a href="#p_56" class="pid">56</a></li>
  <li>
    <i id="p_57" class="pid"></i>Line 11 has Bob attach to the contract.
    The value <span class="snip"><span style="color: #24292F">ctcAlice</span></span> contains no secret information and could easily be printed out and shared with Bob outside of the consensus network.<a href="#p_57" class="pid">57</a>
  </li>
  <li><i id="p_58" class="pid"></i>Lines 13 through 22 launch the backends and wait for their completion. We'll look at the details in a moment.<a href="#p_58" class="pid">58</a></li>
</ul>
<p><i id="p_59" class="pid"></i>This code, similar for all test programs, demonstrates how straightforward it is to scaffold a Reach application for testing.<a href="#p_59" class="pid">59</a></p>
<p><i id="p_60" class="pid"></i>Let's look at initializing and interfacing each participant, starting with Alice.<a href="#p_60" class="pid">60</a></p>
<pre class="snippet numbered"><div class="codeHeader"><a href="https://github.com/reach-sh/reach-lang/tree/master/examples/overview/index.mjs">/examples/overview/index.mjs</a><a class="far fa-copy copyBtn" data-clipboard-text="import { loadStdlib } from '@reach-sh/stdlib';
import * as backend from './build/index.main.mjs';

(async () => {
  const stdlib = await loadStdlib(process.env);

  const accAlice = await stdlib.newTestAccount(stdlib.parseCurrency(100));
  const accBob = await stdlib.newTestAccount(stdlib.parseCurrency(100));

  const ctcAlice = accAlice.contract(backend);
  const ctcBob = accBob.contract(backend, ctcAlice.getInfo());

  await Promise.all([
    ctcAlice.participants.Alice({
      request: stdlib.parseCurrency(5),
      info: 'If you wear these, you can see beyond evil illusions.'
    }),
    ctcBob.p.Bob({
      want: (amt) => console.log(`Alice asked Bob for ${stdlib.formatCurrency(amt)}`),
      got: (secret) => console.log(`Alice's secret is: ${secret}`),
    }),
  ]);
})();" href="#"></a></div><ol class="snippet"><li value="14"><span style="color: #24292F">    ctcAlice.participants.</span><span style="color: #8250DF">Alice</span><span style="color: #24292F">({</span></li><li value="15"><span style="color: #24292F">      request: stdlib.</span><span style="color: #8250DF">parseCurrency</span><span style="color: #24292F">(</span><span style="color: #0550AE">5</span><span style="color: #24292F">),</span></li><li value="16"><span style="color: #24292F">      info: </span><span style="color: #0A3069">'If you wear these, you can see beyond evil illusions.'</span></li><li value="17"><span style="color: #24292F">    }),</span></li></ol></pre>
<ul>
  <li><i id="p_61" class="pid"></i>Line 14 uses the contract handle associated with Alice's account to run the Alice participant backend, passing an object which holds the interact functions.<a href="#p_61" class="pid">61</a></li>
  <li><i id="p_62" class="pid"></i>Line 15 provides the <span class="snip"><span style="color: #24292F">request</span></span> value.<a href="#p_62" class="pid">62</a></li>
  <li><i id="p_63" class="pid"></i>Line 16 provides the <span class="snip"><span style="color: #24292F">info</span></span> value.<a href="#p_63" class="pid">63</a></li>
</ul>
<p><i id="p_64" class="pid"></i>Let's look at Bob next.<a href="#p_64" class="pid">64</a></p>
<pre class="snippet numbered"><div class="codeHeader"><a href="https://github.com/reach-sh/reach-lang/tree/master/examples/overview/index.mjs">/examples/overview/index.mjs</a><a class="far fa-copy copyBtn" data-clipboard-text="import { loadStdlib } from '@reach-sh/stdlib';
import * as backend from './build/index.main.mjs';

(async () => {
  const stdlib = await loadStdlib(process.env);

  const accAlice = await stdlib.newTestAccount(stdlib.parseCurrency(100));
  const accBob = await stdlib.newTestAccount(stdlib.parseCurrency(100));

  const ctcAlice = accAlice.contract(backend);
  const ctcBob = accBob.contract(backend, ctcAlice.getInfo());

  await Promise.all([
    ctcAlice.participants.Alice({
      request: stdlib.parseCurrency(5),
      info: 'If you wear these, you can see beyond evil illusions.'
    }),
    ctcBob.p.Bob({
      want: (amt) => console.log(`Alice asked Bob for ${stdlib.formatCurrency(amt)}`),
      got: (secret) => console.log(`Alice's secret is: ${secret}`),
    }),
  ]);
})();" href="#"></a></div><ol class="snippet"><li value="18"><span style="color: #24292F">    ctcBob.p.</span><span style="color: #8250DF">Bob</span><span style="color: #24292F">({</span></li><li value="19"><span style="color: #24292F">      </span><span style="color: #8250DF">want</span><span style="color: #24292F">: (</span><span style="color: #953800">amt</span><span style="color: #24292F">) </span><span style="color: #CF222E">=&gt;</span><span style="color: #24292F"> console.</span><span style="color: #8250DF">log</span><span style="color: #24292F">(</span><span style="color: #0A3069">`Alice asked Bob for ${</span><span style="color: #24292F">stdlib</span><span style="color: #0A3069">.</span><span style="color: #8250DF">formatCurrency</span><span style="color: #0A3069">(</span><span style="color: #24292F">amt</span><span style="color: #0A3069">)</span><span style="color: #0A3069">}`</span><span style="color: #24292F">),</span></li><li value="20"><span style="color: #24292F">      </span><span style="color: #8250DF">got</span><span style="color: #24292F">: (</span><span style="color: #953800">secret</span><span style="color: #24292F">) </span><span style="color: #CF222E">=&gt;</span><span style="color: #24292F"> console.</span><span style="color: #8250DF">log</span><span style="color: #24292F">(</span><span style="color: #0A3069">`Alice's secret is: ${</span><span style="color: #24292F">secret</span><span style="color: #0A3069">}`</span><span style="color: #24292F">),</span></li><li value="21"><span style="color: #24292F">    }),</span></li></ol></pre>
<ul>
  <li><i id="p_65" class="pid"></i>Line 18 initializes Bob just like Alice, although we use the <span class="snip"><span style="color: #24292F">p</span></span> short-hand.<a href="#p_65" class="pid">65</a></li>
  <li><i id="p_66" class="pid"></i>Line 19 provides his <span class="snip"><span style="color: #24292F">want</span></span> function, which produces a log message and always accepts.<a href="#p_66" class="pid">66</a></li>
  <li><i id="p_67" class="pid"></i>Line 20 provides his <span class="snip"><span style="color: #24292F">got</span></span> function, which displays the secret on the console as well.<a href="#p_67" class="pid">67</a></li>
</ul>
<hr>
<p>
  <i id="p_68" class="pid"></i>Reach completely abstracts all the details of the chosen consensus network from the programmer, except for those directly impinging on business decisions, like the amounts of currency transacted.
  Reach allows programmers to focus on the business logic of their application at every stage, from the core application to the interfacing elements.<a href="#p_68" class="pid">68</a>
</p>
<h2 id="over-execute" class="refHeader">Execute<a aria-hidden="true" tabindex="-1" href="#over-execute"><span class="icon icon-link"></span></a></h2>
<p>
  <i id="p_69" class="pid"></i>It's now time to execute this test program and ensure that everything is working correctly.
  In this case, we've set up our application simply: there's one Reach file for the application and one JavaScript file for the interface.
  This is a common practice, so Reach comes with a simple wrapper script to build and execute such applications.
  We just run:<a href="#p_69" class="pid">69</a>
</p>
<pre class="snippet unnumbered"><div class="codeHeader">&nbsp;<a class="far fa-copy copyBtn" data-clipboard-text="$ reach run" href="#"></a></div><ol class="snippet"><li value="1">$ reach run</li></ol></pre>
<p><i id="p_70" class="pid"></i>And then Reach<a href="#p_70" class="pid">70</a></p>
<ul>
  <li><i id="p_71" class="pid"></i>compiles <a href="https://github.com/reach-sh/reach-lang/tree/master/examples/overview/index.rsh">overview/index.rsh</a>;<a href="#p_71" class="pid">71</a></li>
  <li><i id="p_72" class="pid"></i>creates a temporary Node.js package;<a href="#p_72" class="pid">72</a></li>
  <li><i id="p_73" class="pid"></i>builds a Docker image based on Reach's standard image for the package; and,<a href="#p_73" class="pid">73</a></li>
  <li><i id="p_74" class="pid"></i>runs the application connected to Reach's standard private Ethereum devnet image.<a href="#p_74" class="pid">74</a></li>
</ul>
<p><i id="p_75" class="pid"></i>On typical developer laptops, this entire process takes seconds and can be completely integrated into existing development IDEs, like VSCode, so Reach developers can compile, verify, build, launch, and test their Reach app with a single command.<a href="#p_75" class="pid">75</a></p>
<hr>
<p>
  <i id="p_76" class="pid"></i>Reach completely abstracts all the details of building and maintaining consensus network test environments and build scripts from the programmer, so they can focus exclusively on the business logic of their application.
  In fact, Reach works for multiple networks, so if we instead run<a href="#p_76" class="pid">76</a>
</p>
<pre class="snippet unnumbered"><div class="codeHeader">&nbsp;<a class="far fa-copy copyBtn" data-clipboard-text="$ REACH_CONNECTOR_MODE=ALGO reach run" href="#"></a></div><ol class="snippet"><li value="1">$ REACH_CONNECTOR_MODE=ALGO reach run</li></ol></pre>
<p>
  <i id="p_77" class="pid"></i>then Reach will start up a private Algorand devnet and use the Algorand connector.
  The developer does not need to change anything about their program because Reach is entirely agnostic to the consensus network choice during deployment.<a href="#p_77" class="pid">77</a>
</p>
<p><i id="p_78" class="pid"></i>The same goes for Conflux:<a href="#p_78" class="pid">78</a></p>
<pre class="snippet unnumbered"><div class="codeHeader">&nbsp;<a class="far fa-copy copyBtn" data-clipboard-text="$ REACH_CONNECTOR_MODE=CFX reach run" href="#"></a></div><ol class="snippet"><li value="1">$ REACH_CONNECTOR_MODE=CFX reach run</li></ol></pre>
<h2 id="over-react" class="refHeader">Web app<a aria-hidden="true" tabindex="-1" href="#over-react"><span class="icon icon-link"></span></a></h2>
<div class="note">
  <p>
    <i id="p_79" class="pid"></i>You can <a href="https://www.youtube.com/watch?v=jHEKIMNvs-o">watch a 7-minute video</a> on YouTube
    which demonstrates this section's code in action
    and provides a brief explanation of how it works.<a href="#p_79" class="pid">79</a>
  </p>
</div>
<p>
  <i id="p_80" class="pid"></i>The previous section uses Node.js to perform a test run at the command line.
  However, most Reach developers deploy their DApps via a Web application, as we describe below.<a href="#p_80" class="pid">80</a>
</p>
<p>
  <i id="p_81" class="pid"></i>A Web deployment uses the exact same <a href="https://github.com/reach-sh/reach-lang/tree/master/examples/overview-react/index.rsh">index.rsh</a> file connected, this time, to a React-based <a href="https://github.com/reach-sh/reach-lang/tree/master/examples/overview-react/index.js">index.js</a> file.
  (It also uses some simple React <a href="https://github.com/reach-sh/reach-lang/tree/master/examples/overview-react/views">views</a>
  and <a href="https://github.com/reach-sh/reach-lang/tree/master/examples/overview-react/index.css"><code>css</code></a> to go with it.)
  Let's take a look at some snippets from the React <a href="https://github.com/reach-sh/reach-lang/tree/master/examples/overview-react/index.js">index.js</a> and compare with the Node.js <a href="https://github.com/reach-sh/reach-lang/tree/master/examples/overview/index.mjs">index.mjs</a> from before:<a href="#p_81" class="pid">81</a>
</p>
<pre class="snippet numbered"><div class="codeHeader"><a href="https://github.com/reach-sh/reach-lang/tree/master/examples/overview-react/index.js">/examples/overview-react/index.js</a><a class="far fa-copy copyBtn" data-clipboard-text="import React from 'react';
import ReactDOM from 'react-dom';
import './index.css';
import * as AppViews from './views/AppViews';
import * as AliceViews from './views/AliceViews';
import * as BobViews from './views/BobViews';
import * as backend from './build/index.main.mjs';
import {loadStdlib} from '@reach-sh/stdlib';
const reach = loadStdlib(process.env);
const {standardUnit} = reach;
const defaultFundAmtStandard = '10';
const defaultInfo = 'the cake is a lie';
const defaultRequestStandard = '0.5';

function renderDOM() {
  ReactDOM.render(
    <React.StrictMode><App /></React.StrictMode>,
    document.getElementById('root')
  );
}

class App extends React.Component {
  constructor(props) {
    super(props);
    this.state = {mode: 'ConnectAccount'}
  }
  async componentDidMount() { // from mode: ConnectAccount
    const acc = await reach.getDefaultAccount();
    const addr = reach.formatAddress(await acc.getAddress());
    const balAtomic = await reach.balanceOf(acc);
    const bal = reach.formatCurrency(balAtomic, 4);
    try {
      const faucet = await reach.getFaucet();
      this.setState({mode: 'FundAccount', acc, addr, bal, faucet});
    } catch (e) {
      this.setState({mode: 'SelectRole', acc, addr, bal});
    }
  }
  fundAccount(fundAmountStandard) { // from mode: FundAccount
    const {faucet, acc} = this.state;
    const amountAtomic = reach.parseCurrency(fundAmountStandard || defaultFundAmtStandard);
    reach.transfer(faucet, acc, amountAtomic);
    this.setState({mode: 'SelectRole'});
  }
  skipFundAccount() { this.setState({mode: 'SelectRole'}); } // from mode: FundAccount
  selectRole(role) { this.setState({mode: 'RunRole', role}); } // from mode: SelectRole
  selectBob() { this.selectRole(<Bob acc={this.state.acc} />); }
  selectAlice() { this.selectRole(<Alice acc={this.state.acc} />); }
  render() {
    const {mode, addr, bal, role} = this.state;
    const parent = this;
    let app = null;
    if (mode === 'ConnectAccount') {
      app = <AppViews.ConnectAccount />
    } else if (mode === 'FundAccount') {
      app = <AppViews.FundAccount {...{parent, addr, bal, standardUnit, defaultFundAmtStandard}} />
    } else if (mode === 'SelectRole') {
      app = <AppViews.SelectRole {...{parent}} />
    } else { // 'RunRole'
      app = role;
    }
    return <AppViews.Wrapper {...{app}} />;
  }
}

class Alice extends React.Component {
  constructor(props) {
    super(props);
    this.state = { mode: 'Deploy'};
  }
  async deploy() { // from mode: Deploy
    const ctc = this.props.acc.deploy(backend);
    this.setState({mode: 'EnterInfo', ctc});
    const ctcInfoStr = JSON.stringify(await ctc.getInfo(), null, 2);
    this.setState({ctcInfoStr});
  }
  enterInfo(info) { this.setState({mode: 'EnterRequest', info}); } // from mode: EnterInfo
  enterRequest(requestStandard) { this.setState({mode: 'RunBackend', requestStandard}); } // from mode: EnterRequest
  async runBackend() { // from mode: RunBackend
    const {ctc, requestStandard, info} = this.state;
    this.setState({mode: 'BackendRunning'});
    const request = reach.parseCurrency(requestStandard);
    await backend.Alice(ctc, {request, info});
    this.setState({mode: 'BackendRan'});
  }
  render() {
    let alice = null;
    const parent = this;
    const {mode, ctcInfoStr, requestStandard, info} = this.state;
    if (mode === 'Deploy') {
      alice = <AliceViews.Deploy {...{parent}} />;
    } else if (mode === 'EnterInfo') {
      alice = <AliceViews.EnterInfo {...{parent, defaultInfo}} />;
    } else if (mode === 'EnterRequest') {
      alice = <AliceViews.EnterRequest {...{parent, standardUnit, defaultRequestStandard}} />;
    } else if (mode === 'RunBackend') {
      alice = <AliceViews.RunBackend {...{parent, info, requestStandard, standardUnit}} />;
    } else if (mode === 'BackendRunning') {
      alice = <AliceViews.BackendRunning {...{ctcInfoStr}} />;
    } else { // 'BackendRan'
      alice = <AliceViews.BackendRan />;
    }
    return <AliceViews.AliceWrapper {...{alice}} />
  }
}

class Bob extends React.Component {
  constructor(props) {
    super(props);
    this.state = {mode: 'RunBackend'};
  }
  async runBackend(ctcInfoStr) { // from mode: RunBackend
    const ctcInfo = JSON.parse(ctcInfoStr);
    const ctc = this.props.acc.attach(backend, ctcInfo);
    this.setState({mode: 'ApproveRequest'});
    const interact = {
      want: (request) => this.setState({mode: 'DisplayInfo', requestStandard: reach.formatCurrency(request, 4)}),
      got: (info) => this.setState({info}),
    };
    await backend.Bob(ctc, interact);
  }
  render() {
    let bob = null;
    const parent = this;
    const {mode, requestStandard, info} = this.state;
    if (mode === 'RunBackend') {
      bob = <BobViews.RunBackend {...{parent}} />
    } else if (mode === 'ApproveRequest') {
      bob = <BobViews.ApproveRequest {...{requestStandard}} />;
    } else { // 'DisplayInfo'
      bob = <BobViews.DisplayInfo {...{info}} />
    }
    return <BobViews.BobWrapper {...{bob}} />;
  }
}

renderDOM();" href="#"></a></div><ol class="snippet"><li value="7"><span style="color: #CF222E">import</span><span style="color: #24292F"> </span><span style="color: #0550AE">*</span><span style="color: #24292F"> </span><span style="color: #CF222E">as</span><span style="color: #24292F"> backend </span><span style="color: #CF222E">from</span><span style="color: #24292F"> </span><span style="color: #0A3069">'./build/index.main.mjs'</span><span style="color: #24292F">;</span></li><li value="8"><span style="color: #CF222E">import</span><span style="color: #24292F"> {loadStdlib} </span><span style="color: #CF222E">from</span><span style="color: #24292F"> </span><span style="color: #0A3069">'@reach-sh/stdlib'</span><span style="color: #24292F">;</span></li><li value="9"><span style="color: #CF222E">const</span><span style="color: #24292F"> </span><span style="color: #0550AE">reach</span><span style="color: #24292F"> </span><span style="color: #CF222E">=</span><span style="color: #24292F"> </span><span style="color: #8250DF">loadStdlib</span><span style="color: #24292F">(process.env);</span></li></ol></pre>
<p><i id="p_82" class="pid"></i>At the top of the file, we import the Reach-generated backend as <span class="snip"><span style="color: #24292F">backend</span></span> and we load the standard library as <span class="snip"><span style="color: #24292F">reach</span></span>.<a href="#p_82" class="pid">82</a></p>
<pre class="snippet numbered"><div class="codeHeader"><a href="https://github.com/reach-sh/reach-lang/tree/master/examples/overview-react/index.js">/examples/overview-react/index.js</a><a class="far fa-copy copyBtn" data-clipboard-text="import React from 'react';
import ReactDOM from 'react-dom';
import './index.css';
import * as AppViews from './views/AppViews';
import * as AliceViews from './views/AliceViews';
import * as BobViews from './views/BobViews';
import * as backend from './build/index.main.mjs';
import {loadStdlib} from '@reach-sh/stdlib';
const reach = loadStdlib(process.env);
const {standardUnit} = reach;
const defaultFundAmtStandard = '10';
const defaultInfo = 'the cake is a lie';
const defaultRequestStandard = '0.5';

function renderDOM() {
  ReactDOM.render(
    <React.StrictMode><App /></React.StrictMode>,
    document.getElementById('root')
  );
}

class App extends React.Component {
  constructor(props) {
    super(props);
    this.state = {mode: 'ConnectAccount'}
  }
  async componentDidMount() { // from mode: ConnectAccount
    const acc = await reach.getDefaultAccount();
    const addr = reach.formatAddress(await acc.getAddress());
    const balAtomic = await reach.balanceOf(acc);
    const bal = reach.formatCurrency(balAtomic, 4);
    try {
      const faucet = await reach.getFaucet();
      this.setState({mode: 'FundAccount', acc, addr, bal, faucet});
    } catch (e) {
      this.setState({mode: 'SelectRole', acc, addr, bal});
    }
  }
  fundAccount(fundAmountStandard) { // from mode: FundAccount
    const {faucet, acc} = this.state;
    const amountAtomic = reach.parseCurrency(fundAmountStandard || defaultFundAmtStandard);
    reach.transfer(faucet, acc, amountAtomic);
    this.setState({mode: 'SelectRole'});
  }
  skipFundAccount() { this.setState({mode: 'SelectRole'}); } // from mode: FundAccount
  selectRole(role) { this.setState({mode: 'RunRole', role}); } // from mode: SelectRole
  selectBob() { this.selectRole(<Bob acc={this.state.acc} />); }
  selectAlice() { this.selectRole(<Alice acc={this.state.acc} />); }
  render() {
    const {mode, addr, bal, role} = this.state;
    const parent = this;
    let app = null;
    if (mode === 'ConnectAccount') {
      app = <AppViews.ConnectAccount />
    } else if (mode === 'FundAccount') {
      app = <AppViews.FundAccount {...{parent, addr, bal, standardUnit, defaultFundAmtStandard}} />
    } else if (mode === 'SelectRole') {
      app = <AppViews.SelectRole {...{parent}} />
    } else { // 'RunRole'
      app = role;
    }
    return <AppViews.Wrapper {...{app}} />;
  }
}

class Alice extends React.Component {
  constructor(props) {
    super(props);
    this.state = { mode: 'Deploy'};
  }
  async deploy() { // from mode: Deploy
    const ctc = this.props.acc.deploy(backend);
    this.setState({mode: 'EnterInfo', ctc});
    const ctcInfoStr = JSON.stringify(await ctc.getInfo(), null, 2);
    this.setState({ctcInfoStr});
  }
  enterInfo(info) { this.setState({mode: 'EnterRequest', info}); } // from mode: EnterInfo
  enterRequest(requestStandard) { this.setState({mode: 'RunBackend', requestStandard}); } // from mode: EnterRequest
  async runBackend() { // from mode: RunBackend
    const {ctc, requestStandard, info} = this.state;
    this.setState({mode: 'BackendRunning'});
    const request = reach.parseCurrency(requestStandard);
    await backend.Alice(ctc, {request, info});
    this.setState({mode: 'BackendRan'});
  }
  render() {
    let alice = null;
    const parent = this;
    const {mode, ctcInfoStr, requestStandard, info} = this.state;
    if (mode === 'Deploy') {
      alice = <AliceViews.Deploy {...{parent}} />;
    } else if (mode === 'EnterInfo') {
      alice = <AliceViews.EnterInfo {...{parent, defaultInfo}} />;
    } else if (mode === 'EnterRequest') {
      alice = <AliceViews.EnterRequest {...{parent, standardUnit, defaultRequestStandard}} />;
    } else if (mode === 'RunBackend') {
      alice = <AliceViews.RunBackend {...{parent, info, requestStandard, standardUnit}} />;
    } else if (mode === 'BackendRunning') {
      alice = <AliceViews.BackendRunning {...{ctcInfoStr}} />;
    } else { // 'BackendRan'
      alice = <AliceViews.BackendRan />;
    }
    return <AliceViews.AliceWrapper {...{alice}} />
  }
}

class Bob extends React.Component {
  constructor(props) {
    super(props);
    this.state = {mode: 'RunBackend'};
  }
  async runBackend(ctcInfoStr) { // from mode: RunBackend
    const ctcInfo = JSON.parse(ctcInfoStr);
    const ctc = this.props.acc.attach(backend, ctcInfo);
    this.setState({mode: 'ApproveRequest'});
    const interact = {
      want: (request) => this.setState({mode: 'DisplayInfo', requestStandard: reach.formatCurrency(request, 4)}),
      got: (info) => this.setState({info}),
    };
    await backend.Bob(ctc, interact);
  }
  render() {
    let bob = null;
    const parent = this;
    const {mode, requestStandard, info} = this.state;
    if (mode === 'RunBackend') {
      bob = <BobViews.RunBackend {...{parent}} />
    } else if (mode === 'ApproveRequest') {
      bob = <BobViews.ApproveRequest {...{requestStandard}} />;
    } else { // 'DisplayInfo'
      bob = <BobViews.DisplayInfo {...{info}} />
    }
    return <BobViews.BobWrapper {...{bob}} />;
  }
}

renderDOM();" href="#"></a></div><ol class="snippet"><li value="27"><span style="color: #24292F">  </span><span style="color: #CF222E">async</span><span style="color: #24292F"> </span><span style="color: #8250DF">componentDidMount</span><span style="color: #24292F">() { </span><span style="color: #6E7781">// from mode: ConnectAccount</span></li><li value="28"><span style="color: #24292F">    </span><span style="color: #CF222E">const</span><span style="color: #24292F"> </span><span style="color: #0550AE">acc</span><span style="color: #24292F"> </span><span style="color: #CF222E">=</span><span style="color: #24292F"> </span><span style="color: #CF222E">await</span><span style="color: #24292F"> reach.</span><span style="color: #8250DF">getDefaultAccount</span><span style="color: #24292F">();</span></li></ol></pre>
<p>
  <i id="p_83" class="pid"></i>We hook into the App <a href="https://reactjs.org/docs/react-component.html">component</a>'s <a href="https://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/">lifecycle event</a> <span class="snip"><span style="color: #24292F">componentDidMount</span></span>
  in order to fetch the user's account.
  <span class="snip"><span style="color: #24292F">getDefaultAccount</span></span> automatically interacts with browser extensions, like MetaMask, to get the user's
  currently-selected account.
  Reach is able to deploy contracts and send transactions to the consensus network by prompting the user directly through the extension's API, without additional assistance from the React frontend.
  This is just like how in the Node.js deployment, the Reach programmer does not need to decode the details of the underlying consensus network's interaction API.<a href="#p_83" class="pid">83</a>
</p>
<pre class="snippet numbered"><div class="codeHeader"><a href="https://github.com/reach-sh/reach-lang/tree/master/examples/overview-react/index.js">/examples/overview-react/index.js</a><a class="far fa-copy copyBtn" data-clipboard-text="import React from 'react';
import ReactDOM from 'react-dom';
import './index.css';
import * as AppViews from './views/AppViews';
import * as AliceViews from './views/AliceViews';
import * as BobViews from './views/BobViews';
import * as backend from './build/index.main.mjs';
import {loadStdlib} from '@reach-sh/stdlib';
const reach = loadStdlib(process.env);
const {standardUnit} = reach;
const defaultFundAmtStandard = '10';
const defaultInfo = 'the cake is a lie';
const defaultRequestStandard = '0.5';

function renderDOM() {
  ReactDOM.render(
    <React.StrictMode><App /></React.StrictMode>,
    document.getElementById('root')
  );
}

class App extends React.Component {
  constructor(props) {
    super(props);
    this.state = {mode: 'ConnectAccount'}
  }
  async componentDidMount() { // from mode: ConnectAccount
    const acc = await reach.getDefaultAccount();
    const addr = reach.formatAddress(await acc.getAddress());
    const balAtomic = await reach.balanceOf(acc);
    const bal = reach.formatCurrency(balAtomic, 4);
    try {
      const faucet = await reach.getFaucet();
      this.setState({mode: 'FundAccount', acc, addr, bal, faucet});
    } catch (e) {
      this.setState({mode: 'SelectRole', acc, addr, bal});
    }
  }
  fundAccount(fundAmountStandard) { // from mode: FundAccount
    const {faucet, acc} = this.state;
    const amountAtomic = reach.parseCurrency(fundAmountStandard || defaultFundAmtStandard);
    reach.transfer(faucet, acc, amountAtomic);
    this.setState({mode: 'SelectRole'});
  }
  skipFundAccount() { this.setState({mode: 'SelectRole'}); } // from mode: FundAccount
  selectRole(role) { this.setState({mode: 'RunRole', role}); } // from mode: SelectRole
  selectBob() { this.selectRole(<Bob acc={this.state.acc} />); }
  selectAlice() { this.selectRole(<Alice acc={this.state.acc} />); }
  render() {
    const {mode, addr, bal, role} = this.state;
    const parent = this;
    let app = null;
    if (mode === 'ConnectAccount') {
      app = <AppViews.ConnectAccount />
    } else if (mode === 'FundAccount') {
      app = <AppViews.FundAccount {...{parent, addr, bal, standardUnit, defaultFundAmtStandard}} />
    } else if (mode === 'SelectRole') {
      app = <AppViews.SelectRole {...{parent}} />
    } else { // 'RunRole'
      app = role;
    }
    return <AppViews.Wrapper {...{app}} />;
  }
}

class Alice extends React.Component {
  constructor(props) {
    super(props);
    this.state = { mode: 'Deploy'};
  }
  async deploy() { // from mode: Deploy
    const ctc = this.props.acc.deploy(backend);
    this.setState({mode: 'EnterInfo', ctc});
    const ctcInfoStr = JSON.stringify(await ctc.getInfo(), null, 2);
    this.setState({ctcInfoStr});
  }
  enterInfo(info) { this.setState({mode: 'EnterRequest', info}); } // from mode: EnterInfo
  enterRequest(requestStandard) { this.setState({mode: 'RunBackend', requestStandard}); } // from mode: EnterRequest
  async runBackend() { // from mode: RunBackend
    const {ctc, requestStandard, info} = this.state;
    this.setState({mode: 'BackendRunning'});
    const request = reach.parseCurrency(requestStandard);
    await backend.Alice(ctc, {request, info});
    this.setState({mode: 'BackendRan'});
  }
  render() {
    let alice = null;
    const parent = this;
    const {mode, ctcInfoStr, requestStandard, info} = this.state;
    if (mode === 'Deploy') {
      alice = <AliceViews.Deploy {...{parent}} />;
    } else if (mode === 'EnterInfo') {
      alice = <AliceViews.EnterInfo {...{parent, defaultInfo}} />;
    } else if (mode === 'EnterRequest') {
      alice = <AliceViews.EnterRequest {...{parent, standardUnit, defaultRequestStandard}} />;
    } else if (mode === 'RunBackend') {
      alice = <AliceViews.RunBackend {...{parent, info, requestStandard, standardUnit}} />;
    } else if (mode === 'BackendRunning') {
      alice = <AliceViews.BackendRunning {...{ctcInfoStr}} />;
    } else { // 'BackendRan'
      alice = <AliceViews.BackendRan />;
    }
    return <AliceViews.AliceWrapper {...{alice}} />
  }
}

class Bob extends React.Component {
  constructor(props) {
    super(props);
    this.state = {mode: 'RunBackend'};
  }
  async runBackend(ctcInfoStr) { // from mode: RunBackend
    const ctcInfo = JSON.parse(ctcInfoStr);
    const ctc = this.props.acc.attach(backend, ctcInfo);
    this.setState({mode: 'ApproveRequest'});
    const interact = {
      want: (request) => this.setState({mode: 'DisplayInfo', requestStandard: reach.formatCurrency(request, 4)}),
      got: (info) => this.setState({info}),
    };
    await backend.Bob(ctc, interact);
  }
  render() {
    let bob = null;
    const parent = this;
    const {mode, requestStandard, info} = this.state;
    if (mode === 'RunBackend') {
      bob = <BobViews.RunBackend {...{parent}} />
    } else if (mode === 'ApproveRequest') {
      bob = <BobViews.ApproveRequest {...{requestStandard}} />;
    } else { // 'DisplayInfo'
      bob = <BobViews.DisplayInfo {...{info}} />
    }
    return <BobViews.BobWrapper {...{bob}} />;
  }
}

renderDOM();" href="#"></a></div><ol class="snippet"><li value="71"><span style="color: #24292F">  </span><span style="color: #CF222E">async</span><span style="color: #24292F"> </span><span style="color: #8250DF">deploy</span><span style="color: #24292F">() { </span><span style="color: #6E7781">// from mode: Deploy</span></li><li value="72"><span style="color: #24292F">    </span><span style="color: #CF222E">const</span><span style="color: #24292F"> </span><span style="color: #0550AE">ctc</span><span style="color: #24292F"> </span><span style="color: #CF222E">=</span><span style="color: #24292F"> </span><span style="color: #0550AE">this</span><span style="color: #24292F">.props.acc.</span><span style="color: #8250DF">deploy</span><span style="color: #24292F">(backend);</span></li><li value="73"><span style="color: #24292F">    </span><span style="color: #0550AE">this</span><span style="color: #24292F">.</span><span style="color: #8250DF">setState</span><span style="color: #24292F">({mode: </span><span style="color: #0A3069">'EnterInfo'</span><span style="color: #24292F">, ctc});</span></li><li value="74"><span style="color: #24292F">    </span><span style="color: #CF222E">const</span><span style="color: #24292F"> </span><span style="color: #0550AE">ctcInfoStr</span><span style="color: #24292F"> </span><span style="color: #CF222E">=</span><span style="color: #24292F"> </span><span style="color: #0550AE">JSON</span><span style="color: #24292F">.</span><span style="color: #0550AE">stringify</span><span style="color: #24292F">(</span><span style="color: #CF222E">await</span><span style="color: #24292F"> ctc.</span><span style="color: #8250DF">getInfo</span><span style="color: #24292F">(), </span><span style="color: #0550AE">null</span><span style="color: #24292F">, </span><span style="color: #0550AE">2</span><span style="color: #24292F">);</span></li><li value="75"><span style="color: #24292F">    </span><span style="color: #0550AE">this</span><span style="color: #24292F">.</span><span style="color: #8250DF">setState</span><span style="color: #24292F">({ctcInfoStr});</span></li><li value="76"><span style="color: #24292F">  }</span></li></ol></pre>
<p>
  <i id="p_84" class="pid"></i>Our React component has a method called <span class="snip"><span style="color: #24292F">deploy</span></span> that actually deploys the contract on the network, using the same calls as in the test deployment:
  on line 72 we call the <span class="snip"><span style="color: #24292F">acc.deploy</span></span> function,
  and on line 74, we call the <span class="snip"><span style="color: #24292F">ctc.getInfo</span></span> function;
  exactly as we did for the Node.js program.<a href="#p_84" class="pid">84</a>
</p>
<pre class="snippet numbered"><div class="codeHeader"><a href="https://github.com/reach-sh/reach-lang/tree/master/examples/overview-react/index.js">/examples/overview-react/index.js</a><a class="far fa-copy copyBtn" data-clipboard-text="import React from 'react';
import ReactDOM from 'react-dom';
import './index.css';
import * as AppViews from './views/AppViews';
import * as AliceViews from './views/AliceViews';
import * as BobViews from './views/BobViews';
import * as backend from './build/index.main.mjs';
import {loadStdlib} from '@reach-sh/stdlib';
const reach = loadStdlib(process.env);
const {standardUnit} = reach;
const defaultFundAmtStandard = '10';
const defaultInfo = 'the cake is a lie';
const defaultRequestStandard = '0.5';

function renderDOM() {
  ReactDOM.render(
    <React.StrictMode><App /></React.StrictMode>,
    document.getElementById('root')
  );
}

class App extends React.Component {
  constructor(props) {
    super(props);
    this.state = {mode: 'ConnectAccount'}
  }
  async componentDidMount() { // from mode: ConnectAccount
    const acc = await reach.getDefaultAccount();
    const addr = reach.formatAddress(await acc.getAddress());
    const balAtomic = await reach.balanceOf(acc);
    const bal = reach.formatCurrency(balAtomic, 4);
    try {
      const faucet = await reach.getFaucet();
      this.setState({mode: 'FundAccount', acc, addr, bal, faucet});
    } catch (e) {
      this.setState({mode: 'SelectRole', acc, addr, bal});
    }
  }
  fundAccount(fundAmountStandard) { // from mode: FundAccount
    const {faucet, acc} = this.state;
    const amountAtomic = reach.parseCurrency(fundAmountStandard || defaultFundAmtStandard);
    reach.transfer(faucet, acc, amountAtomic);
    this.setState({mode: 'SelectRole'});
  }
  skipFundAccount() { this.setState({mode: 'SelectRole'}); } // from mode: FundAccount
  selectRole(role) { this.setState({mode: 'RunRole', role}); } // from mode: SelectRole
  selectBob() { this.selectRole(<Bob acc={this.state.acc} />); }
  selectAlice() { this.selectRole(<Alice acc={this.state.acc} />); }
  render() {
    const {mode, addr, bal, role} = this.state;
    const parent = this;
    let app = null;
    if (mode === 'ConnectAccount') {
      app = <AppViews.ConnectAccount />
    } else if (mode === 'FundAccount') {
      app = <AppViews.FundAccount {...{parent, addr, bal, standardUnit, defaultFundAmtStandard}} />
    } else if (mode === 'SelectRole') {
      app = <AppViews.SelectRole {...{parent}} />
    } else { // 'RunRole'
      app = role;
    }
    return <AppViews.Wrapper {...{app}} />;
  }
}

class Alice extends React.Component {
  constructor(props) {
    super(props);
    this.state = { mode: 'Deploy'};
  }
  async deploy() { // from mode: Deploy
    const ctc = this.props.acc.deploy(backend);
    this.setState({mode: 'EnterInfo', ctc});
    const ctcInfoStr = JSON.stringify(await ctc.getInfo(), null, 2);
    this.setState({ctcInfoStr});
  }
  enterInfo(info) { this.setState({mode: 'EnterRequest', info}); } // from mode: EnterInfo
  enterRequest(requestStandard) { this.setState({mode: 'RunBackend', requestStandard}); } // from mode: EnterRequest
  async runBackend() { // from mode: RunBackend
    const {ctc, requestStandard, info} = this.state;
    this.setState({mode: 'BackendRunning'});
    const request = reach.parseCurrency(requestStandard);
    await backend.Alice(ctc, {request, info});
    this.setState({mode: 'BackendRan'});
  }
  render() {
    let alice = null;
    const parent = this;
    const {mode, ctcInfoStr, requestStandard, info} = this.state;
    if (mode === 'Deploy') {
      alice = <AliceViews.Deploy {...{parent}} />;
    } else if (mode === 'EnterInfo') {
      alice = <AliceViews.EnterInfo {...{parent, defaultInfo}} />;
    } else if (mode === 'EnterRequest') {
      alice = <AliceViews.EnterRequest {...{parent, standardUnit, defaultRequestStandard}} />;
    } else if (mode === 'RunBackend') {
      alice = <AliceViews.RunBackend {...{parent, info, requestStandard, standardUnit}} />;
    } else if (mode === 'BackendRunning') {
      alice = <AliceViews.BackendRunning {...{ctcInfoStr}} />;
    } else { // 'BackendRan'
      alice = <AliceViews.BackendRan />;
    }
    return <AliceViews.AliceWrapper {...{alice}} />
  }
}

class Bob extends React.Component {
  constructor(props) {
    super(props);
    this.state = {mode: 'RunBackend'};
  }
  async runBackend(ctcInfoStr) { // from mode: RunBackend
    const ctcInfo = JSON.parse(ctcInfoStr);
    const ctc = this.props.acc.attach(backend, ctcInfo);
    this.setState({mode: 'ApproveRequest'});
    const interact = {
      want: (request) => this.setState({mode: 'DisplayInfo', requestStandard: reach.formatCurrency(request, 4)}),
      got: (info) => this.setState({info}),
    };
    await backend.Bob(ctc, interact);
  }
  render() {
    let bob = null;
    const parent = this;
    const {mode, requestStandard, info} = this.state;
    if (mode === 'RunBackend') {
      bob = <BobViews.RunBackend {...{parent}} />
    } else if (mode === 'ApproveRequest') {
      bob = <BobViews.ApproveRequest {...{requestStandard}} />;
    } else { // 'DisplayInfo'
      bob = <BobViews.DisplayInfo {...{info}} />
    }
    return <BobViews.BobWrapper {...{bob}} />;
  }
}

renderDOM();" href="#"></a></div><ol class="snippet"><li value="79"><span style="color: #24292F">  </span><span style="color: #CF222E">async</span><span style="color: #24292F"> </span><span style="color: #8250DF">runBackend</span><span style="color: #24292F">() { </span><span style="color: #6E7781">// from mode: RunBackend</span></li><li value="80"><span style="color: #24292F">    </span><span style="color: #CF222E">const</span><span style="color: #24292F"> {</span><span style="color: #0550AE">ctc</span><span style="color: #24292F">, </span><span style="color: #0550AE">requestStandard</span><span style="color: #24292F">, </span><span style="color: #0550AE">info</span><span style="color: #24292F">} </span><span style="color: #CF222E">=</span><span style="color: #24292F"> </span><span style="color: #0550AE">this</span><span style="color: #24292F">.state;</span></li><li value="81"><span style="color: #24292F">    </span><span style="color: #0550AE">this</span><span style="color: #24292F">.</span><span style="color: #8250DF">setState</span><span style="color: #24292F">({mode: </span><span style="color: #0A3069">'BackendRunning'</span><span style="color: #24292F">});</span></li><li value="82"><span style="color: #24292F">    </span><span style="color: #CF222E">const</span><span style="color: #24292F"> </span><span style="color: #0550AE">request</span><span style="color: #24292F"> </span><span style="color: #CF222E">=</span><span style="color: #24292F"> reach.</span><span style="color: #8250DF">parseCurrency</span><span style="color: #24292F">(requestStandard);</span></li><li value="83"><span style="color: #24292F">    </span><span style="color: #CF222E">await</span><span style="color: #24292F"> backend.</span><span style="color: #8250DF">Alice</span><span style="color: #24292F">(ctc, {request, info});</span></li><li value="84"><span style="color: #24292F">    </span><span style="color: #0550AE">this</span><span style="color: #24292F">.</span><span style="color: #8250DF">setState</span><span style="color: #24292F">({mode: </span><span style="color: #0A3069">'BackendRan'</span><span style="color: #24292F">});</span></li><li value="85"><span style="color: #24292F">  }</span></li></ol></pre>
<p><i id="p_85" class="pid"></i>Similarly, we implement a <span class="snip"><span style="color: #24292F">runBackend</span></span> method that executes the Reach program as Alice using information gathered from the React UI.<a href="#p_85" class="pid">85</a></p>
<pre class="snippet numbered"><div class="codeHeader"><a href="https://github.com/reach-sh/reach-lang/tree/master/examples/overview-react/index.js">/examples/overview-react/index.js</a><a class="far fa-copy copyBtn" data-clipboard-text="import React from 'react';
import ReactDOM from 'react-dom';
import './index.css';
import * as AppViews from './views/AppViews';
import * as AliceViews from './views/AliceViews';
import * as BobViews from './views/BobViews';
import * as backend from './build/index.main.mjs';
import {loadStdlib} from '@reach-sh/stdlib';
const reach = loadStdlib(process.env);
const {standardUnit} = reach;
const defaultFundAmtStandard = '10';
const defaultInfo = 'the cake is a lie';
const defaultRequestStandard = '0.5';

function renderDOM() {
  ReactDOM.render(
    <React.StrictMode><App /></React.StrictMode>,
    document.getElementById('root')
  );
}

class App extends React.Component {
  constructor(props) {
    super(props);
    this.state = {mode: 'ConnectAccount'}
  }
  async componentDidMount() { // from mode: ConnectAccount
    const acc = await reach.getDefaultAccount();
    const addr = reach.formatAddress(await acc.getAddress());
    const balAtomic = await reach.balanceOf(acc);
    const bal = reach.formatCurrency(balAtomic, 4);
    try {
      const faucet = await reach.getFaucet();
      this.setState({mode: 'FundAccount', acc, addr, bal, faucet});
    } catch (e) {
      this.setState({mode: 'SelectRole', acc, addr, bal});
    }
  }
  fundAccount(fundAmountStandard) { // from mode: FundAccount
    const {faucet, acc} = this.state;
    const amountAtomic = reach.parseCurrency(fundAmountStandard || defaultFundAmtStandard);
    reach.transfer(faucet, acc, amountAtomic);
    this.setState({mode: 'SelectRole'});
  }
  skipFundAccount() { this.setState({mode: 'SelectRole'}); } // from mode: FundAccount
  selectRole(role) { this.setState({mode: 'RunRole', role}); } // from mode: SelectRole
  selectBob() { this.selectRole(<Bob acc={this.state.acc} />); }
  selectAlice() { this.selectRole(<Alice acc={this.state.acc} />); }
  render() {
    const {mode, addr, bal, role} = this.state;
    const parent = this;
    let app = null;
    if (mode === 'ConnectAccount') {
      app = <AppViews.ConnectAccount />
    } else if (mode === 'FundAccount') {
      app = <AppViews.FundAccount {...{parent, addr, bal, standardUnit, defaultFundAmtStandard}} />
    } else if (mode === 'SelectRole') {
      app = <AppViews.SelectRole {...{parent}} />
    } else { // 'RunRole'
      app = role;
    }
    return <AppViews.Wrapper {...{app}} />;
  }
}

class Alice extends React.Component {
  constructor(props) {
    super(props);
    this.state = { mode: 'Deploy'};
  }
  async deploy() { // from mode: Deploy
    const ctc = this.props.acc.deploy(backend);
    this.setState({mode: 'EnterInfo', ctc});
    const ctcInfoStr = JSON.stringify(await ctc.getInfo(), null, 2);
    this.setState({ctcInfoStr});
  }
  enterInfo(info) { this.setState({mode: 'EnterRequest', info}); } // from mode: EnterInfo
  enterRequest(requestStandard) { this.setState({mode: 'RunBackend', requestStandard}); } // from mode: EnterRequest
  async runBackend() { // from mode: RunBackend
    const {ctc, requestStandard, info} = this.state;
    this.setState({mode: 'BackendRunning'});
    const request = reach.parseCurrency(requestStandard);
    await backend.Alice(ctc, {request, info});
    this.setState({mode: 'BackendRan'});
  }
  render() {
    let alice = null;
    const parent = this;
    const {mode, ctcInfoStr, requestStandard, info} = this.state;
    if (mode === 'Deploy') {
      alice = <AliceViews.Deploy {...{parent}} />;
    } else if (mode === 'EnterInfo') {
      alice = <AliceViews.EnterInfo {...{parent, defaultInfo}} />;
    } else if (mode === 'EnterRequest') {
      alice = <AliceViews.EnterRequest {...{parent, standardUnit, defaultRequestStandard}} />;
    } else if (mode === 'RunBackend') {
      alice = <AliceViews.RunBackend {...{parent, info, requestStandard, standardUnit}} />;
    } else if (mode === 'BackendRunning') {
      alice = <AliceViews.BackendRunning {...{ctcInfoStr}} />;
    } else { // 'BackendRan'
      alice = <AliceViews.BackendRan />;
    }
    return <AliceViews.AliceWrapper {...{alice}} />
  }
}

class Bob extends React.Component {
  constructor(props) {
    super(props);
    this.state = {mode: 'RunBackend'};
  }
  async runBackend(ctcInfoStr) { // from mode: RunBackend
    const ctcInfo = JSON.parse(ctcInfoStr);
    const ctc = this.props.acc.attach(backend, ctcInfo);
    this.setState({mode: 'ApproveRequest'});
    const interact = {
      want: (request) => this.setState({mode: 'DisplayInfo', requestStandard: reach.formatCurrency(request, 4)}),
      got: (info) => this.setState({info}),
    };
    await backend.Bob(ctc, interact);
  }
  render() {
    let bob = null;
    const parent = this;
    const {mode, requestStandard, info} = this.state;
    if (mode === 'RunBackend') {
      bob = <BobViews.RunBackend {...{parent}} />
    } else if (mode === 'ApproveRequest') {
      bob = <BobViews.ApproveRequest {...{requestStandard}} />;
    } else { // 'DisplayInfo'
      bob = <BobViews.DisplayInfo {...{info}} />
    }
    return <BobViews.BobWrapper {...{bob}} />;
  }
}

renderDOM();" href="#"></a></div><ol class="snippet"><li value="112"><span style="color: #24292F">  </span><span style="color: #CF222E">async</span><span style="color: #24292F"> </span><span style="color: #8250DF">runBackend</span><span style="color: #24292F">(</span><span style="color: #953800">ctcInfoStr</span><span style="color: #24292F">) { </span><span style="color: #6E7781">// from mode: RunBackend</span></li><li value="113"><span style="color: #24292F">    </span><span style="color: #CF222E">const</span><span style="color: #24292F"> </span><span style="color: #0550AE">ctcInfo</span><span style="color: #24292F"> </span><span style="color: #CF222E">=</span><span style="color: #24292F"> </span><span style="color: #0550AE">JSON</span><span style="color: #24292F">.</span><span style="color: #0550AE">parse</span><span style="color: #24292F">(ctcInfoStr);</span></li><li value="114"><span style="color: #24292F">    </span><span style="color: #CF222E">const</span><span style="color: #24292F"> </span><span style="color: #0550AE">ctc</span><span style="color: #24292F"> </span><span style="color: #CF222E">=</span><span style="color: #24292F"> </span><span style="color: #0550AE">this</span><span style="color: #24292F">.props.acc.</span><span style="color: #8250DF">attach</span><span style="color: #24292F">(backend, ctcInfo);</span></li><li value="115"><span style="color: #24292F">    </span><span style="color: #0550AE">this</span><span style="color: #24292F">.</span><span style="color: #8250DF">setState</span><span style="color: #24292F">({mode: </span><span style="color: #0A3069">'ApproveRequest'</span><span style="color: #24292F">});</span></li><li value="116"><span style="color: #24292F">    </span><span style="color: #CF222E">const</span><span style="color: #24292F"> </span><span style="color: #0550AE">interact</span><span style="color: #24292F"> </span><span style="color: #CF222E">=</span><span style="color: #24292F"> {</span></li><li value="117"><span style="color: #24292F">      </span><span style="color: #8250DF">want</span><span style="color: #24292F">: (</span><span style="color: #953800">request</span><span style="color: #24292F">) </span><span style="color: #CF222E">=&gt;</span><span style="color: #24292F"> </span><span style="color: #0550AE">this</span><span style="color: #24292F">.</span><span style="color: #8250DF">setState</span><span style="color: #24292F">({mode: </span><span style="color: #0A3069">'DisplayInfo'</span><span style="color: #24292F">, requestStandard: reach.</span><span style="color: #8250DF">formatCurrency</span><span style="color: #24292F">(request, </span><span style="color: #0550AE">4</span><span style="color: #24292F">)}),</span></li><li value="118"><span style="color: #24292F">      </span><span style="color: #8250DF">got</span><span style="color: #24292F">: (</span><span style="color: #953800">info</span><span style="color: #24292F">) </span><span style="color: #CF222E">=&gt;</span><span style="color: #24292F"> </span><span style="color: #0550AE">this</span><span style="color: #24292F">.</span><span style="color: #8250DF">setState</span><span style="color: #24292F">({info}),</span></li><li value="119"><span style="color: #24292F">    };</span></li><li value="120"><span style="color: #24292F">    </span><span style="color: #CF222E">await</span><span style="color: #24292F"> backend.</span><span style="color: #8250DF">Bob</span><span style="color: #24292F">(ctc, interact);</span></li><li value="121"><span style="color: #24292F">  }</span></li></ol></pre>
<p><i id="p_86" class="pid"></i>We implement a similar method in the <span class="snip"><span style="color: #24292F">Bob</span></span> component that runs the backend as Bob.<a href="#p_86" class="pid">86</a></p>
<p>
  <i id="p_87" class="pid"></i>We specify Alice's and Bob's respective participant interact interfaces
  just as we would in Node.js.
  In the React program,
  we have the ability to leverage Bob's <span class="snip"><span style="color: #24292F">interact</span></span> functions as callbacks
  that can update the React state
  in order to display to, or harvest information from, the React user interface.<a href="#p_87" class="pid">87</a>
</p>
<p>
  <i id="p_88" class="pid"></i>You can install the <code>@reachsh/stdlib</code> JavaScript library
  into your React project,
  or for convenience, instead of setting up a React project,
  you can simply use the command<a href="#p_88" class="pid">88</a>
</p>
<pre class="snippet unnumbered"><div class="codeHeader">&nbsp;<a class="far fa-copy copyBtn" data-clipboard-text="$ reach react" href="#"></a></div><ol class="snippet"><li value="1">$ reach react</li></ol></pre>
<p><i id="p_89" class="pid"></i>This command runs your DApp with the React development server in a Docker container which has Reach and React JavaScript dependencies pre-installed, so it starts up much faster than building them yourself.<a href="#p_89" class="pid">89</a></p>
<p><i id="p_90" class="pid"></i>As before, you can use <code>REACH_CONNECTOR_MODE</code> to choose your desired connector.<a href="#p_90" class="pid">90</a></p>
<pre class="snippet unnumbered"><div class="codeHeader">&nbsp;<a class="far fa-copy copyBtn" data-clipboard-text="$ REACH_CONNECTOR_MODE=ETH reach react" href="#"></a></div><ol class="snippet"><li value="1">$ REACH_CONNECTOR_MODE=ETH reach react</li></ol></pre>
<pre class="snippet unnumbered"><div class="codeHeader">&nbsp;<a class="far fa-copy copyBtn" data-clipboard-text="$ REACH_CONNECTOR_MODE=ALGO reach react" href="#"></a></div><ol class="snippet"><li value="1">$ REACH_CONNECTOR_MODE=ALGO reach react</li></ol></pre>
<pre class="snippet unnumbered"><div class="codeHeader">&nbsp;<a class="far fa-copy copyBtn" data-clipboard-text="$ REACH_CONNECTOR_MODE=CFX reach react" href="#"></a></div><ol class="snippet"><li value="1">$ REACH_CONNECTOR_MODE=CFX reach react</li></ol></pre>
<h2 id="over-next" class="refHeader">Next steps<a aria-hidden="true" tabindex="-1" href="#over-next"><span class="icon icon-link"></span></a></h2>
<p>
  <i id="p_91" class="pid"></i>In this overview, we've briefly described the structure and fundamental concepts of a Reach application.
  We've shown how to construct a simple program, compile it, connect an interface, test at the command-line, and deploy it using a React Web application.
  Since this is only a brief overview of what Reach can do, we left a lot out.
  But even so, it should be clear why Reach is the easiest and safest programming language for decentralized application development.<a href="#p_91" class="pid">91</a>
</p>
<p>
  <i id="p_92" class="pid"></i>Furthermore, this example program has many flaws and should not be used in practice.
  For example, it provides no protection to Bob in the event that Alice fails to deliver the information, and makes no attempt to ensure that the information is what he wants.
  Reach allows you to abstract away the low-level details of your decentralized program and focus on these sorts of bigger picture issues.
  In the rest of <a href="/guide/#guide">the guide</a>, we discuss design issues like this. For example,<a href="#p_92" class="pid">92</a>
</p>
<ul>
  <li><i id="p_93" class="pid"></i>Effectively using <a href="/guide/assert/#guide-assert">automatic verification</a> to check your application;<a href="#p_93" class="pid">93</a></li>
  <li><i id="p_94" class="pid"></i>Fortifying your application against <a href="/guide/timeout/#guide-timeout">non-participation</a>;<a href="#p_94" class="pid">94</a></li>
  <li><i id="p_95" class="pid"></i>Building <a href="/guide/abstract/#guide-abstract">interaction abstractions</a> for related applications.<a href="#p_95" class="pid">95</a></li>
</ul>
<p><i id="p_96" class="pid"></i>However, unless you're ready to dive deep now, the next steps for you are to:<a href="#p_96" class="pid">96</a></p>
<ul>
  <li><i id="p_97" class="pid"></i><a href="/tool/install/#ref-install">Install Reach</a>;<a href="#p_97" class="pid">97</a></li>
  <li><i id="p_98" class="pid"></i>Work through the <a href="/tut/rps/#tut">tutorial</a>;<a href="#p_98" class="pid">98</a></li>
  <li><i id="p_99" class="pid"></i>Join <a href="https://discord.gg/AZsgcXu">the Discord community</a>.<a href="#p_99" class="pid">99</a></li>
</ul>
<p><i id="p_100" class="pid"></i>Thanks for being part of Reach!<a href="#p_100" class="pid">100</a></p>