<p>
  <i id="p_0" class="pid"></i>A Reach local step occurs in the body of <span class="snip"><span style="color: #24292F">only</span></span> or <span class="snip"><span style="color: #24292F">each</span></span> statements.
  It represents the actions taken by a single participant in an application.<a href="#p_0" class="pid">0</a>
</p>
<h2 id="ref-programs-local-stmts" class="refHeader">Statements<a aria-hidden="true" tabindex="-1" href="#ref-programs-local-stmts"><span class="icon icon-link"></span></a></h2>
<p><i id="p_1" class="pid"></i>Any statements valid for a <a href="/rsh/compute/#ref-programs-compute-stmts">computation</a> are valid for a local step.<a href="#p_1" class="pid">1</a></p>
<h2 id="ref-programs-local-exprs" class="refHeader">Expressions<a aria-hidden="true" tabindex="-1" href="#ref-programs-local-exprs"><span class="icon icon-link"></span></a></h2>
<p>
  <i id="p_2" class="pid"></i>Any expressions valid for a <a href="/rsh/compute/#ref-programs-compute-exprs">computation</a> are valid for a local step.
  However, some additional expressions are allowed.<a href="#p_2" class="pid">2</a>
</p>
<h3 id="ref-programs-local-this" class="refHeader"><code>this</code><a aria-hidden="true" tabindex="-1" href="#ref-programs-local-this"><span class="icon icon-link"></span></a></h3>
<p>
  <i id="p_3" class="pid"></i>Inside of a local step, <span class="snip"><span style="color: #0550AE">this</span></span> refers to the participant performing the step.
  This is useful when the local step was initiated by an <span class="snip"><span style="color: #24292F">each</span></span> expression.<a href="#p_3" class="pid">3</a>
</p>
<h3 id="interact" class="refHeader"><code>interact</code><a aria-hidden="true" tabindex="-1" href="#interact"><span class="icon icon-link"></span></a></h3>
<p><span class="ref" id="rsh_interact" data-scope="rsh" data-symbol="interact"></span></p>
<pre class="snippet numbered"><div class="codeHeader">&nbsp;<a class="far fa-copy copyBtn" data-clipboard-text="interact.amount
interact.notify(handA, handB)
interact.chooseAmount(heap1, heap2)" href="#"></a></div><ol class="snippet"><li value="1"><span style="color: #24292F">interact.amount</span></li><li value="2"><span style="color: #24292F">interact.</span><span style="color: #8250DF">notify</span><span style="color: #24292F">(handA, handB)</span></li><li value="3"><span style="color: #24292F">interact.</span><span style="color: #8250DF">chooseAmount</span><span style="color: #24292F">(heap1, heap2)</span></li></ol></pre>
<p><i id="p_4" class="pid"></i>An <span class="term" id="term_interaction%20expression">interaction expression</span>, written <span class="snip"><span style="color: #24292F">interact.</span><span style="color: #8250DF">METHOD</span><span style="color: #24292F">(</span><span style="color: #0550AE">EXPR_0</span><span style="color: #24292F">, </span><span style="color: #CF222E">...</span><span style="color: #24292F">, EXPR_n)</span></span>, where <span class="snip"><span style="color: #0550AE">METHOD</span></span> is an identifier bound in the participant interact interface to a function type, and <span class="snip"><span style="color: #0550AE">EXPR_0</span></span> through <span class="snip"><span style="color: #24292F">EXPR_n</span></span> are expressions that evaluate to the result of an interaction with a frontend that receives the evaluation of the <span class="snip"><span style="color: #24292F">n</span></span> expressions and sends a value.<a href="#p_4" class="pid">4</a></p>
<p><i id="p_5" class="pid"></i>An interaction expression may also be written <span class="snip"><span style="color: #24292F">interact.</span><span style="color: #0550AE">KEY</span></span>, where <span class="snip"><span style="color: #0550AE">KEY</span></span> is bound in the participant interact interface to a non-function type.<a href="#p_5" class="pid">5</a></p>
<p><i id="p_6" class="pid"></i>An interaction expression may only occur in a local step.<a href="#p_6" class="pid">6</a></p>
<h3 id="assume" class="refHeader"><code>assume</code><a aria-hidden="true" tabindex="-1" href="#assume"><span class="icon icon-link"></span></a></h3>
<p><span class="ref" id="rsh_assume" data-scope="rsh" data-symbol="assume"></span></p>
<pre class="snippet unnumbered"><div class="codeHeader">&nbsp;<a class="far fa-copy copyBtn" data-clipboard-text="assume( claim, [msg] )" href="#"></a></div><ol class="snippet"><li value="1"><span style="color: #8250DF">assume</span><span style="color: #24292F">( claim, [msg] )</span></li></ol></pre>
<p>
  <i id="p_7" class="pid"></i>An assumption where <span class="snip"><span style="color: #24292F">claim</span></span> evaluates to <span class="snip"><span style="color: #0550AE">true</span></span> with honest frontends.
  This may only appear in a local step.
  It accepts an optional bytes argument, which is included in any reported violation.<a href="#p_7" class="pid">7</a>
</p>
<h3 id="fail" class="refHeader"><code>fail</code><a aria-hidden="true" tabindex="-1" href="#fail"><span class="icon icon-link"></span></a></h3>
<p><span class="ref" id="rsh_fail" data-scope="rsh" data-symbol="fail"></span></p>
<pre class="snippet unnumbered"><div class="codeHeader">&nbsp;<a class="far fa-copy copyBtn" data-clipboard-text="fail()" href="#"></a></div><ol class="snippet"><li value="1"><span style="color: #8250DF">fail</span><span style="color: #24292F">()</span></li></ol></pre>
<p><i id="p_8" class="pid"></i>is a convenience method equivalent to <span class="snip"><span style="color: #8250DF">assume</span><span style="color: #24292F">(</span><span style="color: #0550AE">false</span><span style="color: #24292F">)</span></span>. This may only appear in a local step.<a href="#p_8" class="pid">8</a></p>
<h3 id="declassify" class="refHeader"><code>declassify</code><a aria-hidden="true" tabindex="-1" href="#declassify"><span class="icon icon-link"></span></a></h3>
<p><span class="ref" id="rsh_declassify" data-scope="rsh" data-symbol="declassify"></span></p>
<pre class="snippet unnumbered"><div class="codeHeader">&nbsp;<a class="far fa-copy copyBtn" data-clipboard-text="declassify( arg )" href="#"></a></div><ol class="snippet"><li value="1"><span style="color: #8250DF">declassify</span><span style="color: #24292F">( arg )</span></li></ol></pre>
<p><i id="p_9" class="pid"></i>The <span class="term" id="term_declassify">declassify</span> primitive performs a declassification of the given argument.<a href="#p_9" class="pid">9</a></p>
<h3 id="makecommitment" class="refHeader"><code>makeCommitment</code><a aria-hidden="true" tabindex="-1" href="#makecommitment"><span class="icon icon-link"></span></a></h3>
<p><span class="ref" id="rsh_makeCommitment" data-scope="rsh" data-symbol="makeCommitment"></span></p>
<pre class="snippet unnumbered"><div class="codeHeader">&nbsp;<a class="far fa-copy copyBtn" data-clipboard-text="makeCommitment( interact, x )" href="#"></a></div><ol class="snippet"><li value="1"><span style="color: #8250DF">makeCommitment</span><span style="color: #24292F">( interact, x )</span></li></ol></pre>
<p>
  <i id="p_10" class="pid"></i>Returns two values, <span class="snip"><span style="color: #24292F">[ commitment, salt ]</span></span>, where <span class="snip"><span style="color: #24292F">salt</span></span> is the result of calling <span class="snip"><span style="color: #24292F">interact.</span><span style="color: #8250DF">random</span><span style="color: #24292F">()</span></span>, and
  <span class="snip"><span style="color: #24292F">commitment</span></span> is the digest of <span class="snip"><span style="color: #24292F">salt</span></span> and <span class="snip"><span style="color: #24292F">x</span></span>.
  This is used in a local step before <span class="snip"><span style="color: #24292F">checkCommitment</span></span> is used in a consensus step.<a href="#p_10" class="pid">10</a>
</p>
<h3 id="didpublish" class="refHeader"><code>didPublish</code><a aria-hidden="true" tabindex="-1" href="#didpublish"><span class="icon icon-link"></span></a></h3>
<p><span class="ref" id="rsh_didPublish" data-scope="rsh" data-symbol="didPublish"></span></p>
<pre class="snippet unnumbered"><div class="codeHeader">&nbsp;<a class="far fa-copy copyBtn" data-clipboard-text="didPublish()" href="#"></a></div><ol class="snippet"><li value="1"><span style="color: #8250DF">didPublish</span><span style="color: #24292F">()</span></li></ol></pre>
<p><i id="p_11" class="pid"></i>Returns a boolean that indicates whether the last publication was made by this principal.<a href="#p_11" class="pid">11</a></p>